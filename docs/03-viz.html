<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>3&nbsp; Data Visualisation – Applied Data Skills</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./04-summary.html" rel="next">
<link href="./02-reports.html" rel="prev">
<link href="./images/logos/favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-6NP3MF25W3"></script><script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-6NP3MF25W3', { 'anonymize_ip': true});
</script><link rel="stylesheet" href="include/psyteachr.css">
<link rel="stylesheet" href="include/webex.css">
<link rel="stylesheet" href="include/style.css">
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./03-viz.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Visualisation</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Applied Data Skills</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/psyteachr/ads-v3/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
<li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
              <i class="bi bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
              <i class="bi bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
              <i class="bi bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
</div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Intro to R and RStudio</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-reports.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Reports with R Markdown</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-viz.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Visualisation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data Summaries</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-formative.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Practice Report</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-ai.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Coding with AI</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-joins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data Relations</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-tidy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Data Tidying</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-wrangle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Data Wrangling</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-custom.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Customising Visualisations &amp; Reports</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-refs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-license.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">License/Citation</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-installing-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Installing R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-updating-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Updating R, RStudio, and packages</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-symbols.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Symbols</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-conventions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Conventions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-teams.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">Using Teams</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-debugging.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">F</span>&nbsp; <span class="chapter-title">Debugging</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-import.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">G</span>&nbsp; <span class="chapter-title">Data Import</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-datatypes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">H</span>&nbsp; <span class="chapter-title">Data Types</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-dates.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">I</span>&nbsp; <span class="chapter-title">Dates and Times</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-styling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">J</span>&nbsp; <span class="chapter-title">Styling Plots</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-webpage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">K</span>&nbsp; <span class="chapter-title">Webpages</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar"><div class="quarto-margin-header"><div class="margin-header-item">
<p><a href="https://doi.org/10.5281/zenodo.6365077"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.6365077.svg" alt="DOI"></a></p>
</div></div>
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#sec-ilo-viz" id="toc-sec-ilo-viz" class="nav-link active" data-scroll-target="#sec-ilo-viz">Intended Learning Outcomes</a></li>
  <li><a href="#functions-viz" id="toc-functions-viz" class="nav-link" data-scroll-target="#functions-viz"><span class="header-section-number">3.1</span> Functions used</a></li>
  <li><a href="#sec-walkthrough-viz" id="toc-sec-walkthrough-viz" class="nav-link" data-scroll-target="#sec-walkthrough-viz">Walkthrough video</a></li>
  <li><a href="#sec-setup-viz" id="toc-sec-setup-viz" class="nav-link" data-scroll-target="#sec-setup-viz"><span class="header-section-number">3.2</span> Set-up</a></li>
  <li>
<a href="#variable-types" id="toc-variable-types" class="nav-link" data-scroll-target="#variable-types"><span class="header-section-number">3.3</span> Variable types</a>
  <ul class="collapse">
<li><a href="#continuous" id="toc-continuous" class="nav-link" data-scroll-target="#continuous"><span class="header-section-number">3.3.1</span> Continuous</a></li>
  <li><a href="#categorical" id="toc-categorical" class="nav-link" data-scroll-target="#categorical"><span class="header-section-number">3.3.2</span> Categorical</a></li>
  <li><a href="#dates-and-times" id="toc-dates-and-times" class="nav-link" data-scroll-target="#dates-and-times"><span class="header-section-number">3.3.3</span> Dates and times</a></li>
  </ul>
</li>
  <li>
<a href="#building-plots" id="toc-building-plots" class="nav-link" data-scroll-target="#building-plots"><span class="header-section-number">3.4</span> Building plots</a>
  <ul class="collapse">
<li><a href="#sec-plots-loading-data" id="toc-sec-plots-loading-data" class="nav-link" data-scroll-target="#sec-plots-loading-data"><span class="header-section-number">3.4.1</span> Plot Data</a></li>
  <li><a href="#plot-setup" id="toc-plot-setup" class="nav-link" data-scroll-target="#plot-setup"><span class="header-section-number">3.4.2</span> Plot setup</a></li>
  <li><a href="#customising-plots" id="toc-customising-plots" class="nav-link" data-scroll-target="#customising-plots"><span class="header-section-number">3.4.3</span> Customising plots</a></li>
  <li><a href="#sec-captions" id="toc-sec-captions" class="nav-link" data-scroll-target="#sec-captions"><span class="header-section-number">3.4.4</span> Figure captions</a></li>
  </ul>
</li>
  <li>
<a href="#appropriate-plots" id="toc-appropriate-plots" class="nav-link" data-scroll-target="#appropriate-plots"><span class="header-section-number">3.5</span> Appropriate plots</a>
  <ul class="collapse">
<li><a href="#counting-categories" id="toc-counting-categories" class="nav-link" data-scroll-target="#counting-categories"><span class="header-section-number">3.5.1</span> Counting categories</a></li>
  <li><a href="#sec-histogram" id="toc-sec-histogram" class="nav-link" data-scroll-target="#sec-histogram"><span class="header-section-number">3.5.2</span> One continuous variable</a></li>
  <li><a href="#grouped-continuous-variables" id="toc-grouped-continuous-variables" class="nav-link" data-scroll-target="#grouped-continuous-variables"><span class="header-section-number">3.5.3</span> Grouped continuous variables</a></li>
  <li><a href="#two-continuous-variables" id="toc-two-continuous-variables" class="nav-link" data-scroll-target="#two-continuous-variables"><span class="header-section-number">3.5.4</span> Two continuous variables</a></li>
  <li><a href="#overplotting" id="toc-overplotting" class="nav-link" data-scroll-target="#overplotting"><span class="header-section-number">3.5.5</span> Overplotting</a></li>
  </ul>
</li>
  <li>
<a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises"><span class="header-section-number">3.6</span> Exercises</a>
  <ul class="collapse">
<li><a href="#sec-exercises-new-rmd-3" id="toc-sec-exercises-new-rmd-3" class="nav-link" data-scroll-target="#sec-exercises-new-rmd-3"><span class="header-section-number">3.6.1</span> New Markdown</a></li>
  <li><a href="#sec-exercises-summary" id="toc-sec-exercises-summary" class="nav-link" data-scroll-target="#sec-exercises-summary"><span class="header-section-number">3.6.2</span> Summary</a></li>
  <li><a href="#presenting-plots" id="toc-presenting-plots" class="nav-link" data-scroll-target="#presenting-plots"><span class="header-section-number">3.6.3</span> Presenting plots</a></li>
  <li><a href="#combining-plots-1" id="toc-combining-plots-1" class="nav-link" data-scroll-target="#combining-plots-1"><span class="header-section-number">3.6.4</span> Combining plots</a></li>
  <li><a href="#editing-your-markdown-display" id="toc-editing-your-markdown-display" class="nav-link" data-scroll-target="#editing-your-markdown-display"><span class="header-section-number">3.6.5</span> Editing your Markdown display</a></li>
  <li><a href="#share-your-work" id="toc-share-your-work" class="nav-link" data-scroll-target="#share-your-work"><span class="header-section-number">3.6.6</span> Share your work</a></li>
  </ul>
</li>
  <li><a href="#sec-glossary-viz" id="toc-sec-glossary-viz" class="nav-link" data-scroll-target="#sec-glossary-viz"><span class="header-section-number">3.7</span> Glossary</a></li>
  <li><a href="#sec-resources-viz" id="toc-sec-resources-viz" class="nav-link" data-scroll-target="#sec-resources-viz"><span class="header-section-number">3.8</span> Further Resources</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/psyteachr/ads-v3/edit/master/03-viz.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/psyteachr/ads-v3/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li><li><a href="https://github.com/psyteachr/ads-v3/blob/master/03-viz.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title"><span id="sec-viz" class="quarto-section-identifier"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Visualisation</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><section id="sec-ilo-viz" class="level2 unnumbered"><h2 class="unnumbered anchored" data-anchor-id="sec-ilo-viz">Intended Learning Outcomes</h2>
<ul>
<li>Be able to identify categorical versus continuous data</li>
<li>Be able to create plots in layers using ggplot</li>
<li>Be able to choose appropriate plots for data</li>
</ul></section><section id="functions-viz" class="level2" data-number="3.1"><h2 data-number="3.1" class="anchored" data-anchor-id="functions-viz">
<span class="header-section-number">3.1</span> Functions used</h2>
<ul>
<li>built-in (you can always use these without loading any packages)
<ul>
<li>base:: , <code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code>, <code><a href="https://rdrr.io/r/base/c.html">c()</a></code>, <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code>, <code><a href="https://rdrr.io/r/base/mean.html">mean()</a></code>, <code><a href="https://rdrr.io/r/base/seq.html">seq()</a></code>,</li>
<li>grDevices:: <code><a href="https://rdrr.io/r/grDevices/rgb.html">rgb()</a></code>
</li>
</ul>
</li>
<li>tidyverse (you can use all these with <code><a href="https://tidyverse.tidyverse.org">library(tidyverse)</a></code>)
<ul>
<li>readr:: <code>col_character()</code>, <code>col_datetime()</code>, <code>col_double()</code>, <code>col_factor()</code>, <code>col_integer()</code>, <code>cols()</code>, <code>read_csv()</code>
</li>
<li>lubridate:: <code>now()</code>, <code>today()</code>
</li>
<li>dplyr:: <code>count()</code>, <code>glimpse()</code>,</li>
<li>ggplot2:: <code>aes()</code>, <code>coord_cartesian()</code>, <code>element_blank()</code>, <code>facet_wrap()</code>, <code>geom_bar()</code>, <code>geom_boxplot()</code>, <code>geom_col()</code>, <code>geom_histogram()</code>, <code>geom_jitter()</code>, <code>geom_point()</code>, <code>geom_smooth()</code>, <code>ggplot()</code>, <code>ggtitle()</code>, <code>guides()</code>, <code>scale_fill_manual()</code>, <code>scale_x_continuous()</code>, <code>scale_x_date()</code>, <code>scale_x_discrete()</code>, <code>scale_y_continuous()</code>, <code>spec()</code>, <code>stat_summary()</code>, <code>theme()</code>, <code>theme_bw()</code>, <code>theme_minimal()</code>, <code>theme_set()</code>
</li>
</ul>
</li>
<li>other (you need to load each package to use these)
<ul>
<li>ggthemes:: <code>theme_gdocs()</code>
</li>
<li>patchwork:: <code>plot_layout()</code>
</li>
</ul>
</li>
</ul></section><section id="sec-walkthrough-viz" class="level2 unnumbered"><h2 class="unnumbered anchored" data-anchor-id="sec-walkthrough-viz">Walkthrough video</h2>
<p>There is a walkthrough video of this chapter available via <a href="https://echo360.org.uk/media/457312c7-ae4f-4506-8016-a29df4f47462/public">Echo360</a>. Please note that there may have been minor edits to the book since the video was recorded. Where there are differences, the book should always take precedence.</p>
</section><section id="sec-setup-viz" class="level2" data-number="3.2"><h2 data-number="3.2" class="anchored" data-anchor-id="sec-setup-viz">
<span class="header-section-number">3.2</span> Set-up</h2>
<p>Create a new project for the work we’ll do in this chapter:</p>
<ul>
<li><if>File &gt; New Project…</if></li>
<li>Name the project <code class="path">03-visualisation</code>
</li>
<li>Save it inside your ADS directory (<strong>not</strong> inside another project)</li>
</ul>
<p>Then, create and save a new <a href="https://psyteachr.github.io/glossary/r#r-markdown" target="_blank" class="glossary" title="The R-specific version of markdown: a way to specify formatting, such as headers, paragraphs, lists, bolding, and links, as well as code blocks and inline code.">R Markdown</a> document named <code>plots.Rmd</code>, get rid of the default template text, and load the packages in the set-up code <a href="https://psyteachr.github.io/glossary/c#chunk" target="_blank" class="glossary" title="A section of code in an R Markdown file">chunk</a>. You should have all of these packages installed already, but if you get the message <code>Error in library(x) : there is no package called ‘x’</code>, please refer to <a href="01-intro.html#sec-install-package" class="quarto-xref"><span>Section 1.4.1</span></a>.</p>
<div class="cell" data-layout-align="center" data-verbatim="r setup, include=FALSE">
<div class="verbatim">
<pre class="sourceCode r code-with-copy"><code class="sourceCode R">```{r setup, include=FALSE}</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># includes ggplot2</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(patchwork) <span class="co"># for multi-part plots</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(ggthemes)  <span class="co"># for plot themes</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(lubridate) <span class="co"># for manipulating dates</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="sourceCode r code-with-copy"><code class="sourceCode R">```</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
</div>
</div>
<p>We’d recommend making a new code chunk for each different activity, and using the white space to make notes on any errors you make, things you find interesting, or questions you’d like to ask the course team.</p>
<p>Download the <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-visualization.pdf">ggplot2 cheat sheet</a>.</p>
</section><section id="variable-types" class="level2" data-number="3.3"><h2 data-number="3.3" class="anchored" data-anchor-id="variable-types">
<span class="header-section-number">3.3</span> Variable types</h2>
<p>If a spreadsheet is in a <a href="https://psyteachr.github.io/glossary/t#tidy-data" target="_blank" class="glossary" title="A format for data that maps the meaning onto the structure.">tidy data</a> format, each row is an <a href="https://psyteachr.github.io/glossary/o#observation" target="_blank" class="glossary" title="All of the data about a single trial or question.">observation</a>, each column is a <a href="https://psyteachr.github.io/glossary/v#variable" target="_blank" class="glossary" title="(coding): A word that identifies and stores the value of some data for later use; (stats): An attribute or characteristic of an observation that you can measure, count, or describe">variable</a>, and the information in each cell is a single <a href="https://psyteachr.github.io/glossary/v#value" target="_blank" class="glossary" title="A single number or piece of data.">value</a>. We’ll learn more about how to get our data into this format in <a href="08-tidy.html" class="quarto-xref"><span>Chapter 8</span></a>, but to get started we’ll use datasets with the right format.</p>
<p>For example, the table below lists pets owned by members of the psyTeachR team. Each row is an observation of one pet. There are 6 variables for each pet, their <code>name</code>, <code>owner</code>, <code>species</code>, <code>birthdate</code>, <code>weight</code> (in kg), and <code>rating</code> (on a 5-point scale from “very evil” to “very good”).</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">name</th>
<th style="text-align: left;">owner</th>
<th style="text-align: left;">species</th>
<th style="text-align: left;">birthdate</th>
<th style="text-align: right;">weight</th>
<th style="text-align: left;">rating</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Darwin</td>
<td style="text-align: left;">Lisa</td>
<td style="text-align: left;">ferret</td>
<td style="text-align: left;">1998-04-02</td>
<td style="text-align: right;">1.2</td>
<td style="text-align: left;">a little evil</td>
</tr>
<tr class="even">
<td style="text-align: left;">Oy</td>
<td style="text-align: left;">Lisa</td>
<td style="text-align: left;">ferret</td>
<td style="text-align: left;">NA</td>
<td style="text-align: right;">2.9</td>
<td style="text-align: left;">very good</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Khaleesi</td>
<td style="text-align: left;">Emily</td>
<td style="text-align: left;">cat</td>
<td style="text-align: left;">2014-10-01</td>
<td style="text-align: right;">4.5</td>
<td style="text-align: left;">very good</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bernie</td>
<td style="text-align: left;">Phil</td>
<td style="text-align: left;">dog</td>
<td style="text-align: left;">2017-06-01</td>
<td style="text-align: right;">32.0</td>
<td style="text-align: left;">very good</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>Variables can be classified as <a href="https://psyteachr.github.io/glossary/c#continuous" target="_blank" class="glossary" title="Data that can take on any values between other existing values.">continuous</a> (numbers) or <a href="https://psyteachr.github.io/glossary/c#categorical" target="_blank" class="glossary" title="Data that can only take certain values, such as types of pet.">categorical</a> (labels). When you’re plotting data, it’s important to know what kind of variables you have, which can help you decide what types of plots are most appropriate. Each variable also has a <a href="https://psyteachr.github.io/glossary/d#data-type" target="_blank" class="glossary" title="The kind of data represented by an object.">data type</a>, such as <a href="https://psyteachr.github.io/glossary/n#numeric" target="_blank" class="glossary" title="A data type representing a real decimal number or integer.">numeric</a> (numbers), <a href="https://psyteachr.github.io/glossary/c#character" target="_blank" class="glossary" title="A data type representing strings of text.">character</a> (text), or <a href="https://psyteachr.github.io/glossary/l#logical" target="_blank" class="glossary" title="A data type representing TRUE or FALSE values.">logical</a> (TRUE/FALSE values). Some plots can only work on some data types. Make sure you have watched the mini-lecture on types of data from last week before you work through this chapter. Additionally, <a href="app-datatypes.html" class="quarto-xref"><span>Appendix H</span></a> has more details, as this concept will be relevant repeatedly.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/appx/excel-format-cells.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>Data types are like the categories when you format cells in Excel.</figcaption></figure>
</div>
</div>
</div>
<section id="continuous" class="level3" data-number="3.3.1"><h3 data-number="3.3.1" class="anchored" data-anchor-id="continuous">
<span class="header-section-number">3.3.1</span> Continuous</h3>
<p><a href="https://psyteachr.github.io/glossary/c#continuous" target="_blank" class="glossary" title="Data that can take on any values between other existing values.">Continuous</a> variables are properties you can measure, like weight. You can use continuous variables in mathematical operations, like calculating the sum total of a column of prices or the average number of social media likes per day. They may be rounded to the nearest whole number, but it should make sense to have a measurement halfway between.</p>
<p>Continuous variables always have a <a href="https://psyteachr.github.io/glossary/n#numeric" target="_blank" class="glossary" title="A data type representing a real decimal number or integer.">numeric</a> data type. They are either <a href="https://psyteachr.github.io/glossary/i#integer" target="_blank" class="glossary" title="A data type representing whole numbers.">integers</a> like <code>42</code> or <a href="https://psyteachr.github.io/glossary/d#double" target="_blank" class="glossary" title="A data type representing a real decimal number">doubles</a> like <code>3.14159</code>.</p>
</section><section id="categorical" class="level3" data-number="3.3.2"><h3 data-number="3.3.2" class="anchored" data-anchor-id="categorical">
<span class="header-section-number">3.3.2</span> Categorical</h3>
<p><a href="https://psyteachr.github.io/glossary/c#categorical" target="_blank" class="glossary" title="Data that can only take certain values, such as types of pet.">Categorical</a> variables are properties you can count, like the species of pet. Categorical variables can be &lt;a href=‘https://psyteachr.github.io/glossary/n#nominal’ target=’_blank’ class=‘glossary’ title=‘Categorical variables that don’t have an inherent order, such as types of animal.’&gt;nominal, where the categories don’t really have an order, like cats, dogs and ferrets (even though ferrets are obviously best), or <a href="https://psyteachr.github.io/glossary/o#ordinal" target="_blank" class="glossary" title="Discrete variables that have an inherent order, such as level of education or dislike/like.">ordinal</a>, where they have a clear order but the distance between the categories isn’t something you could exactly equate, like points on a <a href="https://psyteachr.github.io/glossary/l#likert" target="_blank" class="glossary" title="A rating scale with a small number of discrete points in order">Likert</a> rating scale. Even if a data table uses numbers like 1-7 to represent ordinal variables, you shouldn’t treat them like continuous variables.</p>
<p>Categorical data can have a <a href="https://psyteachr.github.io/glossary/c#character" target="_blank" class="glossary" title="A data type representing strings of text.">character</a> data type, also called <a href="https://psyteachr.github.io/glossary/s#string" target="_blank" class="glossary" title="A piece of text inside of quotes.">strings</a>. These are made by putting text inside of quotes. That text can be letters, punctuation, or even numbers. For example, <code>"January"</code> is a character string, but so is <code>"1"</code> if you put it in quotes. The character data type is best for variables that can have a lot of different values that you can’t predict ahead of time.</p>
<p>Categorical data can also be <a href="https://psyteachr.github.io/glossary/f#factor" target="_blank" class="glossary" title="A data type where a specific set of values are stored with labels; An explanatory variable manipulated by the experimenter">factors</a>, a specific type of integer that lets you specify the category names and their order. This is useful for making plots display with categories in the order you want (otherwise they default to alphabetical order). The factor data type is best for categories that have a specific number of levels.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Do not factor numbers
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you factor numeric data, it gets converted to the integers 1 to the number of unique values, no matter what the values are. Additionally, you can no longer use the values as numbers, such as calculating the mean.</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Example</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">3</span>, <span class="dv">0</span>, .<span class="dv">5</span>)  <span class="co"># numeric vector</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>f <span class="ot">&lt;-</span> <span class="fu">factor</span>(x)     <span class="co"># convert to factor</span></span>
<span id="cb2-3"><a href="#cb2-3"></a>x <span class="sc">==</span> <span class="fu">as.numeric</span>(f) <span class="co"># does not convert back to numeric </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>You cannot average a factor</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>m <span class="ot">&lt;-</span> <span class="fu">mean</span>(f)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in mean.default(f): argument is not numeric or logical: returning NA</code></pre>
</div>
</div>
</div>
</div>
<p>Sometimes people represent categorical variables with numbers that correspond to names, like 0 = “no” and 1 = “yes”, but values in between don’t have a clear interpretation. If you have control over how the data are recorded, it’s better to use the character names for clarity. You’ll learn how to recode columns in <a href="09-wrangle.html" class="quarto-xref"><span>Chapter 9</span></a>.</p>
</section><section id="dates-and-times" class="level3" data-number="3.3.3"><h3 data-number="3.3.3" class="anchored" data-anchor-id="dates-and-times">
<span class="header-section-number">3.3.3</span> Dates and times</h3>
<p>Dates and times are a special case of variable. They can act like categorical or continuous variables, and there are special ways to plot them. Dates and times can be hard to work with, but the [<pkg>lubridate</pkg>(https://lubridate.tidyverse.org/) package provides functions to help you with this.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># the current date</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>lubridate<span class="sc">::</span><span class="fu">today</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2024-04-30"</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># the current date and time in the GMT timezone</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>lubridate<span class="sc">::</span><span class="fu">now</span>(<span class="at">tzone =</span> <span class="st">"GMT"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2024-04-30 10:53:45 GMT"</code></pre>
</div>
</div>
<div class="try callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Test your understanding
</div>
</div>
<div class="callout-body-container callout-body">
<p>Coming back to the pets dataset, what type of variable is in each column? You can use the function <code>glimpse()</code> to show a list of the column names, their data types, and the first few values in each column - here is the output of running <code>glimpse()</code> on the pets dataset.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="fu">glimpse</span>(pets)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 4
Columns: 6
$ name      &lt;chr&gt; "Darwin", "Oy", "Khaleesi", "Bernie"
$ owner     &lt;chr&gt; "Lisa", "Lisa", "Emily", "Phil"
$ species   &lt;fct&gt; ferret, ferret, cat, dog
$ birthdate &lt;date&gt; 1998-04-02, NA, 2014-10-01, 2017-06-01
$ weight    &lt;dbl&gt; 1.2, 2.9, 4.5, 32.0
$ rating    &lt;fct&gt; a little evil, very good, very good, very good</code></pre>
</div>
</div>
<table class="caption-top table">
<colgroup>
<col style="width: 30%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">Column</th>
<th style="text-align: left;">Variable type</th>
<th style="text-align: left;">Data type</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>name</code></td>
<td style="text-align: left;"><select class="webex-select"><option value="blank"></option>
<option value="x">continuous</option>
<option value="answer">nominal</option>
<option value="x">ordinal</option>
<option value="x">date</option></select></td>
<td style="text-align: left;"><select class="webex-select"><option value="blank"></option>
<option value="x">numeric</option>
<option value="answer">character</option>
<option value="x">factor</option>
<option value="x">date</option></select></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>owner</code></td>
<td style="text-align: left;"><select class="webex-select"><option value="blank"></option>
<option value="x">continuous</option>
<option value="answer">nominal</option>
<option value="x">ordinal</option>
<option value="x">date</option></select></td>
<td style="text-align: left;"><select class="webex-select"><option value="blank"></option>
<option value="x">numeric</option>
<option value="answer">character</option>
<option value="x">factor</option>
<option value="x">date</option></select></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>species</code></td>
<td style="text-align: left;"><select class="webex-select"><option value="blank"></option>
<option value="x">continuous</option>
<option value="answer">nominal</option>
<option value="x">ordinal</option>
<option value="x">date</option></select></td>
<td style="text-align: left;"><select class="webex-select"><option value="blank"></option>
<option value="x">numeric</option>
<option value="x">character</option>
<option value="answer">factor</option>
<option value="x">date</option></select></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>birthdate</code></td>
<td style="text-align: left;"><select class="webex-select"><option value="blank"></option>
<option value="x">continuous</option>
<option value="x">nominal</option>
<option value="x">ordinal</option>
<option value="answer">date</option></select></td>
<td style="text-align: left;"><select class="webex-select"><option value="blank"></option>
<option value="x">continuous</option>
<option value="x">nominal</option>
<option value="x">ordinal</option>
<option value="answer">date</option></select></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>weight</code></td>
<td style="text-align: left;"><select class="webex-select"><option value="blank"></option>
<option value="answer">continuous</option>
<option value="x">nominal</option>
<option value="x">ordinal</option>
<option value="x">date</option></select></td>
<td style="text-align: left;"><select class="webex-select"><option value="blank"></option>
<option value="answer">numeric</option>
<option value="x">character</option>
<option value="x">factor</option>
<option value="x">date</option></select></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>rating</code></td>
<td style="text-align: left;"><select class="webex-select"><option value="blank"></option>
<option value="x">continuous</option>
<option value="x">nominal</option>
<option value="answer">ordinal</option>
<option value="x">date</option></select></td>
<td style="text-align: left;"><select class="webex-select"><option value="blank"></option>
<option value="x">numeric</option>
<option value="x">character</option>
<option value="answer">factor</option>
<option value="x">date</option></select></td>
</tr>
</tbody>
</table>
</div>
</div>
</section></section><section id="building-plots" class="level2" data-number="3.4"><h2 data-number="3.4" class="anchored" data-anchor-id="building-plots">
<span class="header-section-number">3.4</span> Building plots</h2>
<p>There are multiple approaches to data visualisation in R; in this course we will use the popular package <pkg>ggplot2</pkg>, which is part of the larger <code>tidyverse</code> collection of packages. A grammar of graphics (the “gg” in “ggplot”) is a standardised way to describe the components of a graphic. <pkg>ggplot2</pkg> uses a layered grammar of graphics, in which plots are built up in a series of layers. It may be helpful to think about any picture as having multiple elements that sit semi-transparently over each other. A good analogy is old Disney movies where artists would create a background and then add moveable elements on top of the background via transparencies.</p>
<p><a href="#fig-layers" class="quarto-xref">Figure&nbsp;<span>3.1</span></a> displays the evolution of a simple scatterplot using this layered approach. First, the plot space is built (layer 1); the variables are specified (layer 2); the type of visualisation (known as a <code>geom</code>) that is desired for these variables is specified (layer 3) - in this case <code>geom_point()</code> is called to visualise individual data points; a second geom is added to include a line of best fit (layer 4), the axis labels are edited for readability (layer 5), and finally, a theme is applied to change the overall appearance of the plot (layer 6).</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-layers" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-layers-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-layers-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-layers-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.1: Evolution of a layered plot
</figcaption></figure>
</div>
</div>
</div>
<p>Importantly, each layer is independent and independently customisable. For example, the size, colour and position of each component can be adjusted, or one could, for example, remove the first geom (the data points) to only visualise the line of best fit, simply by removing the layer that draws the data points (<a href="#fig-remove-layer" class="quarto-xref">Figure&nbsp;<span>3.2</span></a>). The use of layers makes it easy to build up complex plots step-by-step, and to adapt or extend plots from existing code.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-remove-layer" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-remove-layer-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-remove-layer-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-remove-layer-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.2: Final plot with scatterplot layer removed.
</figcaption></figure>
</div>
</div>
</div>
<section id="sec-plots-loading-data" class="level3" data-number="3.4.1"><h3 data-number="3.4.1" class="anchored" data-anchor-id="sec-plots-loading-data">
<span class="header-section-number">3.4.1</span> Plot Data</h3>
<p>Let’s build up the plot above, layer by layer. First we need to get the data. We’ll learn how to load data from different sources in <a href="app-import.html" class="quarto-xref"><span>Appendix G</span></a>, but this time we’ll use the same method as we did in <a href="02-reports.html#sec-loading-online" class="quarto-xref"><span>Section 2.5.1</span></a> and load it from an online source.</p>
<p>When you load the data, <code>read_csv()</code> will produce a message that gives you information about the data it has imported and what assumptions it has made. The “column specification” tells you what each column is named and what type of data R has categorised each variable as. The abbreviation “chr” is for <a href="https://psyteachr.github.io/glossary/c#character" target="_blank" class="glossary" title="A data type representing strings of text.">character</a> columns, “dbl” is for <a href="https://psyteachr.github.io/glossary/d#double" target="_blank" class="glossary" title="A data type representing a real decimal number">double</a> columns, and “dttm” is a date/time column.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>survey_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://psyteachr.github.io/ads-v2/data/survey_data.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 707 Columns: 7
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (3): caller_id, employee_id, issue_category
dbl  (3): wait_time, call_time, satisfaction
dttm (1): call_start

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>This data is simulated data for a call centre customer satisfaction survey. The first thing you should do when you need to plot data is to get familiar with what all of the rows (observations) and columns (variables) mean. Sometimes this is obvious, and sometimes it requires help from the data provider. Here, each row represents one call to the centre.</p>
<ul>
<li>
<code>caller_id</code> is a unique ID for each caller</li>
<li>
<code>employee_id</code> is a unique ID for each employee taking calls</li>
<li>
<code>call_start</code> is the date and time that the call arrived</li>
<li>
<code>wait_time</code> is the number of seconds the caller had to wait</li>
<li>
<code>call_time</code> is the number of seconds the call lasted after the employee picked up</li>
<li>
<code>issue_category</code> is whether the issue was tech, sales, returns, or other</li>
<li>
<code>satisfaction</code> is the customer satisfaction rating on a scale from 1 (very unsatisfied) to 5 (very satisfied)</li>
</ul>
<p>Unless you specify the column types, data importing functions will just guess the types and usually default to double for columns with numbers and character for columns with letters. Use the function <code>spec()</code> to find out all of the column types and edit them if needed.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="fu">spec</span>(survey_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>cols(
  caller_id = col_character(),
  employee_id = col_character(),
  call_start = col_datetime(format = ""),
  wait_time = col_double(),
  call_time = col_double(),
  issue_category = col_character(),
  satisfaction = col_double()
)</code></pre>
</div>
</div>
<p>Let’s set <code>issue_category</code> as a factor and set the order of the levels. By default, R will order the levels of a factor alphanumerically, however in many cases you will want or need to set your own order. For example, in this data, it makes most sense for the category “other” to come at the end of the list. After you update the column types, you have to re-import the data by adjusting the <code>read_csv()</code> code to set the <code>col_types</code> argument to the new column types.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Define objects before you use them
</div>
</div>
<div class="callout-body-container callout-body">
<p>Because <code>read_csv()</code> is going to use the object <code>survey_col_types</code>, you must create <code>survey_col_types</code> before you run the adjusted <code>read_csv()</code> code. If you ever need to adjust your code, try to think about the order that the code will run in if you start from scratch and make sure it’s organised appropriately.</p>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="co"># updated column types</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>survey_col_types <span class="ot">&lt;-</span> <span class="fu">cols</span>(</span>
<span id="cb16-3"><a href="#cb16-3"></a>  <span class="at">caller_id =</span> <span class="fu">col_character</span>(),</span>
<span id="cb16-4"><a href="#cb16-4"></a>  <span class="at">employee_id =</span> <span class="fu">col_character</span>(),</span>
<span id="cb16-5"><a href="#cb16-5"></a>  <span class="at">call_start =</span> <span class="fu">col_datetime</span>(<span class="at">format =</span> <span class="st">""</span>),</span>
<span id="cb16-6"><a href="#cb16-6"></a>  <span class="at">wait_time =</span> <span class="fu">col_double</span>(),</span>
<span id="cb16-7"><a href="#cb16-7"></a>  <span class="at">call_time =</span> <span class="fu">col_double</span>(),</span>
<span id="cb16-8"><a href="#cb16-8"></a>  <span class="at">issue_category =</span> <span class="fu">col_factor</span>(<span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"tech"</span>, <span class="st">"sales"</span>, <span class="st">"returns"</span>, <span class="st">"other"</span>)),</span>
<span id="cb16-9"><a href="#cb16-9"></a>  <span class="at">satisfaction =</span> <span class="fu">col_integer</span>()</span>
<span id="cb16-10"><a href="#cb16-10"></a>)</span>
<span id="cb16-11"><a href="#cb16-11"></a></span>
<span id="cb16-12"><a href="#cb16-12"></a><span class="co"># re-import data with correct column  types</span></span>
<span id="cb16-13"><a href="#cb16-13"></a>survey_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://psyteachr.github.io/ads-v2/data/survey_data.csv"</span>,</span>
<span id="cb16-14"><a href="#cb16-14"></a>                        <span class="at">col_types =</span> survey_col_types)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="plot-setup" class="level3" data-number="3.4.2"><h3 data-number="3.4.2" class="anchored" data-anchor-id="plot-setup">
<span class="header-section-number">3.4.2</span> Plot setup</h3>
<section id="default-theme" class="level4" data-number="3.4.2.1"><h4 data-number="3.4.2.1" class="anchored" data-anchor-id="default-theme">
<span class="header-section-number">3.4.2.1</span> Default theme</h4>
<p>Plots in this book use the black-and-white theme, not the default grey theme, so set your default theme to the same so your plots will look like the examples below. At the top of your script, in the setup chunk after you’ve loaded the tidyverse package, add the following code and run it. You’ll learn more ways to customise your theme in <a href="#sec-themes" class="quarto-xref"><span>Section 3.4.3.4</span></a> and <a href="app-styling.html#sec-themes-appendix" class="quarto-xref"><span>Section J.3</span></a>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_bw</span>()) <span class="co"># set the default theme</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="sec-plot-setup-data" class="level4" data-number="3.4.2.2"><h4 data-number="3.4.2.2" class="anchored" data-anchor-id="sec-plot-setup-data">
<span class="header-section-number">3.4.2.2</span> Data</h4>
<p>Every plot starts with the <code>ggplot()</code> function and a data table. If your data are not loaded or you have a typo in your code, this will give you an error message. It’s best to check your plot after each step, so that you can figure out where errors are more easily.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> survey_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-build-plot-setup" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-build-plot-setup-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-build-plot-setup-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-build-plot-setup-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.3: A blank ggplot.
</figcaption></figure>
</div>
</div>
</div>
</section><section id="mapping" class="level4" data-number="3.4.2.3"><h4 data-number="3.4.2.3" class="anchored" data-anchor-id="mapping">
<span class="header-section-number">3.4.2.3</span> Mapping</h4>
<p>The next <a href="https://psyteachr.github.io/glossary/a#argument" target="_blank" class="glossary" title="A variable that provides input to a function.">argument</a> to <code>ggplot()</code> is the <code>mapping</code>. This tells the plot which columns in the data should be represented by, or “mapped” to, different aspects of the plot, such as the x-axis, y-axis, line colour, object fill, or line style. These aspects, or “aesthetics”, are listed inside the <code>aes()</code> function.</p>
<p>Set the arguments <code>x</code> and <code>y</code> to the names of the columns you want to be plotted on those axes. Here, we want to plot the wait time on the x-axis and the call time on the y-axis.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="co"># set up the plot with mapping</span></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="fu">ggplot</span>(</span>
<span id="cb19-3"><a href="#cb19-3"></a>  <span class="at">data =</span> survey_data, </span>
<span id="cb19-4"><a href="#cb19-4"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> wait_time, <span class="at">y =</span> call_time)</span>
<span id="cb19-5"><a href="#cb19-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-build-plot-mapping" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-build-plot-mapping-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-build-plot-mapping-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-build-plot-mapping-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.4: A blank plot with x- and y- axes mapped.
</figcaption></figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
ggplot argument names
</div>
</div>
<div class="callout-body-container callout-body">
<p>In the example above, we wrote out the names of the <a href="https://psyteachr.github.io/glossary/a#argument" target="_blank" class="glossary" title="A variable that provides input to a function.">arguments</a> <code>data</code> and <code>mapping</code>, but in practice, almost everyone omits them. Just make sure you put the data and mapping in the right order.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">ggplot</span>(survey_data,  <span class="fu">aes</span>(<span class="at">x =</span> wait_time, <span class="at">y =</span> call_time))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section><section id="geoms" class="level4" data-number="3.4.2.4"><h4 data-number="3.4.2.4" class="anchored" data-anchor-id="geoms">
<span class="header-section-number">3.4.2.4</span> Geoms</h4>
<p>Now we can add our plot elements in layers. These are referred to as <a href="https://psyteachr.github.io/glossary/g#geom" target="_blank" class="glossary" title="The geometric style in which data are displayed, such as boxplot, density, or histogram.">geoms</a> and their functions start with <code>geom_</code>. You <strong>add</strong> layers onto the base plot created by <code>ggplot()</code> with a plus (<code>+</code>).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time, <span class="at">y =</span> call_time)) <span class="sc">+</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>  <span class="fu">geom_point</span>() <span class="co"># scatterplot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-build-plot-geoms" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-build-plot-geoms-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-build-plot-geoms-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-build-plot-geoms-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.5: Adding a scatterplot with geom_point().
</figcaption></figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Location of the +
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Somewhat annoyingly, the plus has to be on the end of the previous line, not at the start of the next line. If you do make this mistake, it will run the first line of code to produce the base layer but then you will get the following error message rather than adding on <code>geom_point()</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time, <span class="at">y =</span> call_time))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="03-viz_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="sc">+</span> <span class="fu">geom_point</span>() <span class="co"># scatterplot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error:
! Cannot use `+` with a single argument.
ℹ Did you accidentally put `+` on a new line?</code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section id="multiple-geoms" class="level4" data-number="3.4.2.5"><h4 data-number="3.4.2.5" class="anchored" data-anchor-id="multiple-geoms">
<span class="header-section-number">3.4.2.5</span> Multiple geoms</h4>
<p>Part of the power of <pkg>ggplot2</pkg> is that you can add more than one geom to a plot by adding on extra layers and so it quickly becomes possible to make complex and informative visualisation. Importantly, the layers display in the order you set them up. The code below uses the same geoms to produce a scatterplot with a line of best fit, but orders them differently.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="co"># Points first</span></span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time, <span class="at">y =</span> call_time)) <span class="sc">+</span></span>
<span id="cb25-3"><a href="#cb25-3"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="co"># scatterplot</span></span>
<span id="cb25-4"><a href="#cb25-4"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm) <span class="co"># line of best fit</span></span>
<span id="cb25-5"><a href="#cb25-5"></a></span>
<span id="cb25-6"><a href="#cb25-6"></a><span class="co"># Line first</span></span>
<span id="cb25-7"><a href="#cb25-7"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time, <span class="at">y =</span> call_time)) <span class="sc">+</span></span>
<span id="cb25-8"><a href="#cb25-8"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm) <span class="sc">+</span> <span class="co"># line of best fit</span></span>
<span id="cb25-9"><a href="#cb25-9"></a>  <span class="fu">geom_point</span>() <span class="co"># scatterplot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-build-plot-geom2" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-build-plot-geom2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-build-plot-geom2-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-build-plot-geom2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.6: Points first versus line first.
</figcaption></figure>
</div>
</div>
</div>
</section><section id="saving-plots" class="level4" data-number="3.4.2.6"><h4 data-number="3.4.2.6" class="anchored" data-anchor-id="saving-plots">
<span class="header-section-number">3.4.2.6</span> Saving plots</h4>
<p>Just like you can save numbers and data tables to objects, you can also save the output of <code>ggplot()</code>. The code below produces the same plots we created above but saves them to objects named <code>point_first</code> and <code>line_first</code>. If you run just this code, the plots won’t display like they have done before. Instead, you’ll see the object names appear in the environment pane.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>point_first <span class="ot">&lt;-</span> </span>
<span id="cb26-2"><a href="#cb26-2"></a>  <span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time, <span class="at">y =</span> call_time)) <span class="sc">+</span></span>
<span id="cb26-3"><a href="#cb26-3"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="co"># scatterplot</span></span>
<span id="cb26-4"><a href="#cb26-4"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm) <span class="co"># line of best fit</span></span>
<span id="cb26-5"><a href="#cb26-5"></a>  </span>
<span id="cb26-6"><a href="#cb26-6"></a>line_first <span class="ot">&lt;-</span></span>
<span id="cb26-7"><a href="#cb26-7"></a>  <span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time, <span class="at">y =</span> call_time)) <span class="sc">+</span></span>
<span id="cb26-8"><a href="#cb26-8"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm) <span class="sc">+</span> <span class="co"># line of best fit</span></span>
<span id="cb26-9"><a href="#cb26-9"></a>  <span class="fu">geom_point</span>() <span class="co"># scatterplot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To view the plots, call the objects by name. This will output each plot separately.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>point_first <span class="co"># view first plot</span></span>
<span id="cb27-2"><a href="#cb27-2"></a>line_first <span class="co"># view second plot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="combining-plots" class="level4" data-number="3.4.2.7"><h4 data-number="3.4.2.7" class="anchored" data-anchor-id="combining-plots">
<span class="header-section-number">3.4.2.7</span> Combining plots</h4>
<p>One of the reasons to save your plots to objects is so that you can combine multiple plots using functions from the <code>patchwork</code> package. The below code produces the above plot by combining the two plots with <code>+</code> and then specifying that we want the plots produced on a single row with the <code>nrow</code> argument in <code>plot_layout()</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="co"># add plots together in 1 row</span></span>
<span id="cb28-2"><a href="#cb28-2"></a>point_first <span class="sc">+</span> line_first <span class="sc">+</span> <span class="fu">plot_layout</span>(<span class="at">nrow =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-build-plot-geom2b" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-build-plot-geom2b-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-build-plot-geom2b-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-build-plot-geom2b-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.7: Combining plots with patchwork.
</figcaption></figure>
</div>
</div>
</div>
<div class="try callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try changing nrow to 2
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
</section></section><section id="customising-plots" class="level3" data-number="3.4.3"><h3 data-number="3.4.3" class="anchored" data-anchor-id="customising-plots">
<span class="header-section-number">3.4.3</span> Customising plots</h3>
<p>There are nearly endless ways to customise ggplots. We’ll cover a few of the basic customisations here.</p>
<section id="styling-geoms" class="level4" data-number="3.4.3.1"><h4 data-number="3.4.3.1" class="anchored" data-anchor-id="styling-geoms">
<span class="header-section-number">3.4.3.1</span> Styling geoms</h4>
<p>We should definitely put the line in front of the points, but the points are still a bit dark. If you want to change the overall style of a geom, you can set the arguments <code>colour</code>, <code>alpha</code>, <code>shape</code>, <code>size</code> and <code>linetype</code> inside the geom function. There are many different values that you can set these to; <a href="app-styling.html" class="quarto-xref"><span>Appendix J</span></a>) gives details of these. Play around with different values below and figure out what the <a href="https://psyteachr.github.io/glossary/d#default-value" target="_blank" class="glossary" title="A value that a function uses for an argument if it is skipped.">default values</a> are for <code>shape</code> and <code>size</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time, <span class="at">y =</span> call_time)) <span class="sc">+</span></span>
<span id="cb29-2"><a href="#cb29-2"></a>  <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">"dodgerblue"</span>, </span>
<span id="cb29-3"><a href="#cb29-3"></a>             <span class="at">alpha =</span> <span class="fl">0.2</span>, <span class="co"># 20% transparency</span></span>
<span id="cb29-4"><a href="#cb29-4"></a>             <span class="at">shape =</span> <span class="dv">18</span>,  <span class="co"># solid diamond</span></span>
<span id="cb29-5"><a href="#cb29-5"></a>             <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb29-6"><a href="#cb29-6"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, </span>
<span id="cb29-7"><a href="#cb29-7"></a>              <span class="at">formula =</span> y<span class="sc">~</span>x, <span class="co"># formula used to draw line, </span></span>
<span id="cb29-8"><a href="#cb29-8"></a>              <span class="co"># setting method &amp; formula avoids an annoying message</span></span>
<span id="cb29-9"><a href="#cb29-9"></a>              <span class="at">colour =</span> <span class="fu">rgb</span>(<span class="dv">0</span>, .<span class="dv">5</span>, .<span class="dv">8</span>),</span>
<span id="cb29-10"><a href="#cb29-10"></a>              <span class="at">linetype =</span> <span class="dv">3</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-build-plot-style" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-build-plot-style-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-build-plot-style-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-build-plot-style-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.8: Changing geom styles.
</figcaption></figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Setting aesthetics overall versus by category
</div>
</div>
<div class="callout-body-container callout-body">
<p>This method is only for changing the style of <em>all</em> the shapes made with that geom. If you want, for example, points to have different colours depending on which issue category they are from, you set the argument <code>colour = issue_category</code> inside the <code>aes()</code> function for the mapping. You can customise the colours used with <code>scale_</code> functions, which you will learn about below and in <a href="app-styling.html" class="quarto-xref"><span>Appendix J</span></a>).</p>
</div>
</div>
</section><section id="format-axes" class="level4" data-number="3.4.3.2"><h4 data-number="3.4.3.2" class="anchored" data-anchor-id="format-axes">
<span class="header-section-number">3.4.3.2</span> Format axes</h4>
<p>Now we need to make the axes look neater. There are several functions you can use to change the axis labels, but the most powerful ones are the <code>scale_</code> functions. You need to use a scale function that matches the data you’re plotting on that axis and this is where it becomes particularly important to know what type of data you’re working with. Both of the axes here are <a href="https://psyteachr.github.io/glossary/c#continuous" target="_blank" class="glossary" title="Data that can take on any values between other existing values.">continuous</a>, so we’ll use <code>scale_x_continuous()</code> and <code>scale_y_continuous()</code>.</p>
<p>The <code>name</code> argument changes the axis label. The <code>breaks</code> argument sets the major units and needs a <a href="https://psyteachr.github.io/glossary/v#vector" target="_blank" class="glossary" title="A type of data structure that collects values with the same data type, like T/F values, numbers, or strings.">vector</a> of possible values, which can extend beyond the range of the data (e.g., <code>wait time</code> only goes up to 350, but we can specify breaks up to 600 to make the maths easier or anticipate updates to the data). The <code><a href="https://rdrr.io/r/base/seq.html">seq()</a></code> function creates a sequence of numbers <code>from</code> one <code>to</code> another <code>by</code> specified steps.</p>
<div class="cell" data-layout-align="center">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>Example of seq()</strong></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">600</span>, <span class="at">by =</span> <span class="dv">60</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]   0  60 120 180 240 300 360 420 480 540 600</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time, <span class="at">y =</span> call_time)) <span class="sc">+</span></span>
<span id="cb32-2"><a href="#cb32-2"></a>  <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">"dodgerblue"</span>, </span>
<span id="cb32-3"><a href="#cb32-3"></a>             <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> </span>
<span id="cb32-4"><a href="#cb32-4"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, </span>
<span id="cb32-5"><a href="#cb32-5"></a>              <span class="at">formula =</span> y<span class="sc">~</span>x, </span>
<span id="cb32-6"><a href="#cb32-6"></a>              <span class="at">colour =</span> <span class="fu">rgb</span>(<span class="dv">0</span>, .<span class="dv">5</span>, .<span class="dv">8</span>)) <span class="sc">+</span></span>
<span id="cb32-7"><a href="#cb32-7"></a>  <span class="co"># customise axis labels and breaks</span></span>
<span id="cb32-8"><a href="#cb32-8"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Wait Time (seconds)"</span>, </span>
<span id="cb32-9"><a href="#cb32-9"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">600</span>, <span class="at">by =</span> <span class="dv">60</span>)) <span class="sc">+</span></span>
<span id="cb32-10"><a href="#cb32-10"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Call time (seconds)"</span>,</span>
<span id="cb32-11"><a href="#cb32-11"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">600</span>, <span class="at">by =</span> <span class="dv">30</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-build-plot-axes" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-build-plot-axes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-build-plot-axes-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-build-plot-axes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.9: Formatting plot axes with scale_ functions.
</figcaption></figure>
</div>
</div>
</div>
<div class="try callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Minor breaks
</div>
</div>
<div class="callout-body-container callout-body">
<p>Check the help for <code>?scale_x_continuous</code> to see how you would set the minor units or specify how many breaks you want instead.</p>
</div>
</div>
</section><section id="axis-limits" class="level4" data-number="3.4.3.3"><h4 data-number="3.4.3.3" class="anchored" data-anchor-id="axis-limits">
<span class="header-section-number">3.4.3.3</span> Axis limits</h4>
<p>If you want to change the minimum and maximum values on an axis, use the <code>coord_cartesian()</code> function. Many plots make more sense if the minimum and maximum values represent the range of possible values, even if those values aren’t present in the data. Here, wait and call times can’t be less than 0 seconds, so we’ll set the minimum values to 0 and the maximum values to the first break above the highest value.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time, <span class="at">y =</span> call_time)) <span class="sc">+</span></span>
<span id="cb33-2"><a href="#cb33-2"></a>  <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">"dodgerblue"</span>, </span>
<span id="cb33-3"><a href="#cb33-3"></a>             <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> </span>
<span id="cb33-4"><a href="#cb33-4"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, </span>
<span id="cb33-5"><a href="#cb33-5"></a>              <span class="at">formula =</span> y<span class="sc">~</span>x, </span>
<span id="cb33-6"><a href="#cb33-6"></a>              <span class="at">colour =</span> <span class="fu">rgb</span>(<span class="dv">0</span>, .<span class="dv">5</span>, .<span class="dv">8</span>)) <span class="sc">+</span></span>
<span id="cb33-7"><a href="#cb33-7"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Wait Time (seconds)"</span>, </span>
<span id="cb33-8"><a href="#cb33-8"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">600</span>, <span class="at">by =</span> <span class="dv">60</span>)) <span class="sc">+</span></span>
<span id="cb33-9"><a href="#cb33-9"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Call time (seconds)"</span>,</span>
<span id="cb33-10"><a href="#cb33-10"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">600</span>, <span class="at">by =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb33-11"><a href="#cb33-11"></a>  <span class="co"># set axis limits</span></span>
<span id="cb33-12"><a href="#cb33-12"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">360</span>), </span>
<span id="cb33-13"><a href="#cb33-13"></a>                  <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">180</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-build-plot-limits" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-build-plot-limits-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-build-plot-limits-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-build-plot-limits-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.10: Changing the axis limits.
</figcaption></figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Setting limits with the scale_ function
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can also set the <code>limits</code> argument inside the <code>scale_</code> functions, but this actually removes any data that falls outside these limits, rather than cropping your plot, and this can change the appearance of certain types of plots like violin plots and density plots.</p>
</div>
</div>
</section><section id="sec-themes" class="level4" data-number="3.4.3.4"><h4 data-number="3.4.3.4" class="anchored" data-anchor-id="sec-themes">
<span class="header-section-number">3.4.3.4</span> Themes</h4>
<p><pkg>ggplot2</pkg> comes with several built-in themes, such as <code>theme_minimal()</code> and <code>theme_bw()</code>, but the <a href="https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/"><pkg>ggthemes</pkg></a> package provides even more themes to match different software, such as GoogleDocs or Stata, or publications, such as the Economist or the Wall Street Journal. Let’s add the GoogleDocs theme, but change the font size to 20 with the <code>base_size</code> argument.</p>
<p>It’s also worth highlighting that this code is starting to look quite complicated because of the number of layers, but because we’ve built it up slowly it should (hopefully!) make sense. If you see examples of <pkg>ggplot2</pkg> code online that you’d like to adapt, build the plot up layer by layer and it will make it easier to understand what each layer adds.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time, <span class="at">y =</span> call_time)) <span class="sc">+</span></span>
<span id="cb34-2"><a href="#cb34-2"></a>  <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">"dodgerblue"</span>, </span>
<span id="cb34-3"><a href="#cb34-3"></a>             <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> </span>
<span id="cb34-4"><a href="#cb34-4"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, </span>
<span id="cb34-5"><a href="#cb34-5"></a>              <span class="at">formula =</span> y<span class="sc">~</span>x, </span>
<span id="cb34-6"><a href="#cb34-6"></a>              <span class="at">colour =</span> <span class="fu">rgb</span>(<span class="dv">0</span>, .<span class="dv">5</span>, .<span class="dv">8</span>)) <span class="sc">+</span></span>
<span id="cb34-7"><a href="#cb34-7"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Wait Time (seconds)"</span>, </span>
<span id="cb34-8"><a href="#cb34-8"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">600</span>, <span class="at">by =</span> <span class="dv">60</span>)) <span class="sc">+</span></span>
<span id="cb34-9"><a href="#cb34-9"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Call time (seconds)"</span>,</span>
<span id="cb34-10"><a href="#cb34-10"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">600</span>, <span class="at">by =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb34-11"><a href="#cb34-11"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">360</span>), </span>
<span id="cb34-12"><a href="#cb34-12"></a>                  <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">180</span>)) <span class="sc">+</span></span>
<span id="cb34-13"><a href="#cb34-13"></a>  <span class="co"># change the theme</span></span>
<span id="cb34-14"><a href="#cb34-14"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_gdocs</span>(<span class="at">base_size =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-build-plot-theme" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-build-plot-theme-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-build-plot-theme-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-build-plot-theme-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.11: Changing the theme to the Google Docs style.
</figcaption></figure>
</div>
</div>
</div>
</section><section id="theme-tweaks" class="level4" data-number="3.4.3.5"><h4 data-number="3.4.3.5" class="anchored" data-anchor-id="theme-tweaks">
<span class="header-section-number">3.4.3.5</span> Theme tweaks</h4>
<p>If you’re still not quite happy with a theme, you can customise it even further with the <code>themes()</code> function. Check the help for this function to see all of the possible options. The most common thing you’ll want to do is to remove an element entirely. You do this by setting the relevant argument to <code>element_blank()</code>. Below, we’re getting rid of the x-axis line and the plot background, which removes the line around the plot.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time, <span class="at">y =</span> call_time)) <span class="sc">+</span></span>
<span id="cb35-2"><a href="#cb35-2"></a>  <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">"dodgerblue"</span>, </span>
<span id="cb35-3"><a href="#cb35-3"></a>             <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> </span>
<span id="cb35-4"><a href="#cb35-4"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, </span>
<span id="cb35-5"><a href="#cb35-5"></a>              <span class="at">formula =</span> y<span class="sc">~</span>x, </span>
<span id="cb35-6"><a href="#cb35-6"></a>              <span class="at">colour =</span> <span class="fu">rgb</span>(<span class="dv">0</span>, .<span class="dv">5</span>, .<span class="dv">8</span>)) <span class="sc">+</span></span>
<span id="cb35-7"><a href="#cb35-7"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Wait Time (seconds)"</span>, </span>
<span id="cb35-8"><a href="#cb35-8"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">600</span>, <span class="at">by =</span> <span class="dv">60</span>)) <span class="sc">+</span></span>
<span id="cb35-9"><a href="#cb35-9"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Call time (seconds)"</span>,</span>
<span id="cb35-10"><a href="#cb35-10"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">600</span>, <span class="at">by =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb35-11"><a href="#cb35-11"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">360</span>), </span>
<span id="cb35-12"><a href="#cb35-12"></a>                  <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">180</span>)) <span class="sc">+</span></span>
<span id="cb35-13"><a href="#cb35-13"></a>  <span class="fu">theme_gdocs</span>(<span class="at">base_size =</span> <span class="dv">11</span>) <span class="sc">+</span></span>
<span id="cb35-14"><a href="#cb35-14"></a>  <span class="co"># customise theme elements</span></span>
<span id="cb35-15"><a href="#cb35-15"></a>  <span class="fu">theme</span>(<span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb35-16"><a href="#cb35-16"></a>        <span class="at">plot.background =</span> <span class="fu">element_blank</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-build-plot-custom-theme" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-build-plot-custom-theme-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-build-plot-custom-theme-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-build-plot-custom-theme-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.12: Customising the theme to remove the x-axis line and background outline.
</figcaption></figure>
</div>
</div>
</div>
</section></section><section id="sec-captions" class="level3" data-number="3.4.4"><h3 data-number="3.4.4" class="anchored" data-anchor-id="sec-captions">
<span class="header-section-number">3.4.4</span> Figure captions</h3>
<p>You can add a caption directly to the image using the <code>labs()</code> function, which also allows you to add or edit the title, subtitle, and axis labels.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time, <span class="at">y =</span> call_time)) <span class="sc">+</span></span>
<span id="cb36-2"><a href="#cb36-2"></a>  <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">"dodgerblue"</span>, </span>
<span id="cb36-3"><a href="#cb36-3"></a>             <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> </span>
<span id="cb36-4"><a href="#cb36-4"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, </span>
<span id="cb36-5"><a href="#cb36-5"></a>              <span class="at">formula =</span> y<span class="sc">~</span>x, </span>
<span id="cb36-6"><a href="#cb36-6"></a>              <span class="at">colour =</span> <span class="fu">rgb</span>(<span class="dv">0</span>, .<span class="dv">5</span>, .<span class="dv">8</span>)) <span class="sc">+</span></span>
<span id="cb36-7"><a href="#cb36-7"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Wait Time (seconds)"</span>, </span>
<span id="cb36-8"><a href="#cb36-8"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">600</span>, <span class="at">by =</span> <span class="dv">60</span>)) <span class="sc">+</span></span>
<span id="cb36-9"><a href="#cb36-9"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Call time (seconds)"</span>,</span>
<span id="cb36-10"><a href="#cb36-10"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">600</span>, <span class="at">by =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb36-11"><a href="#cb36-11"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">360</span>), </span>
<span id="cb36-12"><a href="#cb36-12"></a>                  <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">180</span>)) <span class="sc">+</span></span>
<span id="cb36-13"><a href="#cb36-13"></a>  <span class="fu">theme_gdocs</span>(<span class="at">base_size =</span> <span class="dv">11</span>) <span class="sc">+</span></span>
<span id="cb36-14"><a href="#cb36-14"></a>  <span class="fu">theme</span>(<span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb36-15"><a href="#cb36-15"></a>        <span class="at">plot.background =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb36-16"><a href="#cb36-16"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"The relationship between wait time and call time"</span>,</span>
<span id="cb36-17"><a href="#cb36-17"></a>       <span class="at">subtitle =</span> <span class="st">"2020 Call Data"</span>,</span>
<span id="cb36-18"><a href="#cb36-18"></a>       <span class="at">caption =</span> <span class="st">"Figure 1. As wait time increases, call time increases."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-caption" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-caption-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-caption-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-caption-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.13: Adding a title, subtitle, and caption.
</figcaption></figure>
</div>
</div>
</div>
<p>However, it is more accessible to include this sort of information in plain text for screen readers. You can add a text caption in the chunk header, and some document types will even automatically number figures for you (you’ll learn about this in <a href="10-custom.html#sec-linked-docs" class="quarto-xref"><span>Section 10.2.2</span></a>). You can also add alt-text descriptions for screen readers that describe the image.</p>
<div class="cell" data-layout-align="center" data-verbatim="r fig-wait-vs-call, fig.cap=&quot;As wait time increases, call time increases.&quot;, fig.alt=&quot;A scatterplot showing wait time on the x-axis (range 0-360 seconds) and call time on the y-axis (range 0-180 seconds) with a trend line showing that as wait time increases, call time increases from about 60 wait/30 call to about 300 wait/65 call.&quot;">
<div class="verbatim">
<pre class="sourceCode r code-with-copy"><code class="sourceCode R">```{r fig-wait-vs-call, fig.cap="As wait time increases, call time increases.", fig.alt="A scatterplot showing wait time on the x-axis (range 0-360 seconds) and call time on the y-axis (range 0-180 seconds) with a trend line showing that as wait time increases, call time increases from about 60 wait/30 call to about 300 wait/65 call."}</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="co"># figure code here</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="sourceCode r code-with-copy"><code class="sourceCode R">```</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
</div>
</div>
</section></section><section id="appropriate-plots" class="level2" data-number="3.5"><h2 data-number="3.5" class="anchored" data-anchor-id="appropriate-plots">
<span class="header-section-number">3.5</span> Appropriate plots</h2>
<p>Now that you know how to build up a plot by layers and customise its appearance, you’re ready to learn about some more plot types. Different types of data require different types of plots, so this section is organised by data type.</p>
<p>The <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-visualization.pdf">ggplot2 cheat sheet</a> is a great resource to help you find plots appropriate to your data, based on how many variables you’re plotting and what type they are. The examples below all use the same customer satisfaction data, but each plot communicates something different.</p>
<p>We don’t expect you to memorise all of the plot types or the methods for customising them, but it will be helpful to try out the code in the examples below for yourself, changing values to test your understanding.</p>
<section id="counting-categories" class="level3" data-number="3.5.1"><h3 data-number="3.5.1" class="anchored" data-anchor-id="counting-categories">
<span class="header-section-number">3.5.1</span> Counting categories</h3>
<section id="bar-plot" class="level4" data-number="3.5.1.1"><h4 data-number="3.5.1.1" class="anchored" data-anchor-id="bar-plot">
<span class="header-section-number">3.5.1.1</span> Bar plot</h4>
<p>If you want to count the number of things per category, you can use <code>geom_bar()</code>. You only need to provide a <code>x</code> mapping to <code>geom_bar()</code> because by default <code>geom_bar()</code> uses the number of observations in each group of <code>x</code> as the value for <code>y</code>, so you don’t need to tell it what to put on the y-axis.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> issue_category)) <span class="sc">+</span></span>
<span id="cb38-2"><a href="#cb38-2"></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-bar" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-bar-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-bar-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-bar-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.14: A basic bar plot.
</figcaption></figure>
</div>
</div>
</div>
<div class="try callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Customising bar plot appearance
</div>
</div>
<div class="callout-body-container callout-body">
<p>You probably want to customise some things, like the colours, order of the columns, and their labels. Inspect the code below and try running it layer by layer to figure out where these things change. The functions <code>scale_fill_manual()</code> and <code>scale_x_discrete()</code> are new, but work in the same way as the other <code>scale_</code> functions. You’ll learn more about this in <a href="10-custom.html#sec-custom-viz" class="quarto-xref"><span>Section 10.1</span></a>.</p>
<div class="cell" data-layout-align="center" data-webex.hide="Code">
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Code
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> issue_category, </span>
<span id="cb39-2"><a href="#cb39-2"></a>                        <span class="at">fill =</span> issue_category)) <span class="sc">+</span></span>
<span id="cb39-3"><a href="#cb39-3"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb39-4"><a href="#cb39-4"></a>  <span class="fu">scale_x_discrete</span>(</span>
<span id="cb39-5"><a href="#cb39-5"></a>    <span class="co"># change axis title</span></span>
<span id="cb39-6"><a href="#cb39-6"></a>    <span class="at">name =</span> <span class="st">"Issue Category"</span>, </span>
<span id="cb39-7"><a href="#cb39-7"></a>    <span class="co"># change order</span></span>
<span id="cb39-8"><a href="#cb39-8"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="st">"tech"</span>, <span class="st">"returns"</span>, <span class="st">"sales"</span>, <span class="st">"other"</span>), </span>
<span id="cb39-9"><a href="#cb39-9"></a>    <span class="co"># change labels</span></span>
<span id="cb39-10"><a href="#cb39-10"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Technical"</span>, <span class="st">"Returns"</span>, <span class="st">"Sales"</span>, <span class="st">"Other"</span>) </span>
<span id="cb39-11"><a href="#cb39-11"></a>  ) <span class="sc">+</span></span>
<span id="cb39-12"><a href="#cb39-12"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb39-13"><a href="#cb39-13"></a>    <span class="co"># change colours</span></span>
<span id="cb39-14"><a href="#cb39-14"></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="at">tech =</span> <span class="st">"goldenrod"</span>, </span>
<span id="cb39-15"><a href="#cb39-15"></a>                <span class="at">returns =</span> <span class="st">"darkgreen"</span>, </span>
<span id="cb39-16"><a href="#cb39-16"></a>                <span class="at">sales =</span> <span class="st">"dodgerblue3"</span>, </span>
<span id="cb39-17"><a href="#cb39-17"></a>                <span class="at">other =</span> <span class="st">"purple3"</span>),</span>
<span id="cb39-18"><a href="#cb39-18"></a>    <span class="co"># remove the legend</span></span>
<span id="cb39-19"><a href="#cb39-19"></a>    <span class="at">guide =</span> <span class="st">"none"</span> </span>
<span id="cb39-20"><a href="#cb39-20"></a>  ) <span class="sc">+</span></span>
<span id="cb39-21"><a href="#cb39-21"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb39-22"><a href="#cb39-22"></a>    <span class="at">name =</span> <span class="st">""</span>, <span class="co"># remove axis title</span></span>
<span id="cb39-23"><a href="#cb39-23"></a>    <span class="co"># remove the space above and below the y-axis</span></span>
<span id="cb39-24"><a href="#cb39-24"></a>    <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> <span class="dv">0</span>)</span>
<span id="cb39-25"><a href="#cb39-25"></a>  ) <span class="sc">+</span></span>
<span id="cb39-26"><a href="#cb39-26"></a>  <span class="co"># minimum = 0, maximum = 350</span></span>
<span id="cb39-27"><a href="#cb39-27"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">350</span>)) <span class="sc">+</span> </span>
<span id="cb39-28"><a href="#cb39-28"></a>  <span class="fu">ggtitle</span>(<span class="st">"Number of issues per category"</span>) <span class="co"># add a title</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="03-viz_files/figure-html/custom-bar-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section id="column-plot" class="level4" data-number="3.5.1.2"><h4 data-number="3.5.1.2" class="anchored" data-anchor-id="column-plot">
<span class="header-section-number">3.5.1.2</span> Column plot</h4>
<p>If your data already have a column with the number you want to plot, you can use <code>geom_col()</code> to plot it. We can use the <code>count()</code> function to make a table with a row for each <code>issue_category</code> and a column called <code>n</code> with the number of observations in that category.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a>count_data <span class="ot">&lt;-</span> <span class="fu">count</span>(survey_data, issue_category)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<table class="caption-top table">
<thead><tr class="header">
<th style="text-align: left;">issue_category</th>
<th style="text-align: right;">n</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">tech</td>
<td style="text-align: right;">311</td>
</tr>
<tr class="even">
<td style="text-align: left;">sales</td>
<td style="text-align: right;">88</td>
</tr>
<tr class="odd">
<td style="text-align: left;">returns</td>
<td style="text-align: right;">232</td>
</tr>
<tr class="even">
<td style="text-align: left;">other</td>
<td style="text-align: right;">76</td>
</tr>
</tbody>
</table>
<p>The mapping for <code>geom_col()</code> requires you to set both the <code>x</code> and <code>y</code> aesthetics. Set <code>y = n</code> because we want to plot the number of issues in each category, and that information is in the column called <code>n</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a><span class="fu">ggplot</span>(count_data, <span class="fu">aes</span>(<span class="at">x =</span> issue_category, <span class="at">y =</span> n)) <span class="sc">+</span></span>
<span id="cb41-2"><a href="#cb41-2"></a>  <span class="fu">geom_col</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-col" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-col-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-col-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-col-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.15: A basic column plot.
</figcaption></figure>
</div>
</div>
</div>
</section><section id="pie-chart" class="level4" data-number="3.5.1.3"><h4 data-number="3.5.1.3" class="anchored" data-anchor-id="pie-chart">
<span class="header-section-number">3.5.1.3</span> Pie chart</h4>
<p>Pie charts are a <a href="https://www.data-to-viz.com/caveat/pie.html" target="_blank">misleading form of data visualisation</a>, so we won’t cover them. We’ll cover options for visualising proportions, like waffle, lollipop and treemap plots, in <a href="10-custom.html#sec-other-plots" class="quarto-xref"><span>Section 10.1.4</span></a>.</p>
<div class="try callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Test your understanding
</div>
</div>
<div class="callout-body-container callout-body">
<p>Here is a small data table.</p>
<table class="caption-top table">
<thead><tr class="header">
<th style="text-align: left;">country</th>
<th style="text-align: right;">population</th>
<th style="text-align: left;">island</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Northern Ireland</td>
<td style="text-align: right;">1,895,510</td>
<td style="text-align: left;">Ireland</td>
</tr>
<tr class="even">
<td style="text-align: left;">Wales</td>
<td style="text-align: right;">3,169,586</td>
<td style="text-align: left;">Great Britain</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Republic of Ireland</td>
<td style="text-align: right;">4,937,786</td>
<td style="text-align: left;">Ireland</td>
</tr>
<tr class="even">
<td style="text-align: left;">Scotland</td>
<td style="text-align: right;">5,466,000</td>
<td style="text-align: left;">Great Britain</td>
</tr>
<tr class="odd">
<td style="text-align: left;">England</td>
<td style="text-align: right;">56,550,138</td>
<td style="text-align: left;">Great Britain</td>
</tr>
</tbody>
</table>
<ul>
<li>What geom would you use to plot the population for each of the 5 countries? <select class="webex-select"><option value="blank"></option>
<option value="x">geom_bar</option>
<option value="answer">geom_col</option></select>
</li>
</ul>
<div class="cell" data-layout-align="center">
<ul>
<li>What mapping would you use?
<div id="radio_PMYAPWUEXC" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_PMYAPWUEXC" value="answer"><span>aes(x = country, y = population)</span></label><label><input type="radio" autocomplete="off" name="radio_PMYAPWUEXC" value="x"><span>aes(x = population, y = country)</span></label><label><input type="radio" autocomplete="off" name="radio_PMYAPWUEXC" value="x"><span>aes(x = country)</span></label><label><input type="radio" autocomplete="off" name="radio_PMYAPWUEXC" value="x"><span>aes(x = island)</span></label><label><input type="radio" autocomplete="off" name="radio_PMYAPWUEXC" value="x"><span>aes(y = population)</span></label>
</div>
</li>
</ul>
</div>
<ul>
<li>What geom would you use to plot the number of countries on each island? <select class="webex-select"><option value="blank"></option>
<option value="answer">geom_bar</option>
<option value="x">geom_col</option></select>
</li>
</ul>
<div class="cell" data-layout-align="center">
<ul>
<li>What mapping would you use?
<div id="radio_PBFKFSZPQK" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_PBFKFSZPQK" value="x"><span>aes(x = country, y = population)</span></label><label><input type="radio" autocomplete="off" name="radio_PBFKFSZPQK" value="x"><span>aes(x = population, y = country)</span></label><label><input type="radio" autocomplete="off" name="radio_PBFKFSZPQK" value="x"><span>aes(x = country)</span></label><label><input type="radio" autocomplete="off" name="radio_PBFKFSZPQK" value="answer"><span>aes(x = island)</span></label><label><input type="radio" autocomplete="off" name="radio_PBFKFSZPQK" value="x"><span>aes(y = population)</span></label>
</div>
</li>
</ul>
</div>
</div>
</div>
</section></section><section id="sec-histogram" class="level3" data-number="3.5.2"><h3 data-number="3.5.2" class="anchored" data-anchor-id="sec-histogram">
<span class="header-section-number">3.5.2</span> One continuous variable</h3>
<p>If you have a continuous variable, like the number of seconds callers have to wait, you can use <code>geom_histogram()</code> to show the distribution. Just like <code>geom_bar()</code> you are only required to specify the <code>x</code> variable.</p>
<p>A histogram splits the data into “bins” along the x-axis and shows the count of how many observations are in each bin along the y-axis.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time)) <span class="sc">+</span></span>
<span id="cb42-2"><a href="#cb42-2"></a>  <span class="fu">geom_histogram</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<div id="fig-histogram" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-histogram-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-histogram-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-histogram-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.16: Histogram of wait times.
</figcaption></figure>
</div>
</div>
</div>
<p>You should always set the <code>binwidth</code> or number of <code>bins</code> to something meaningful for your data (otherwise you get the annoying message above). You might need to try a few options before you find something that looks good and conveys the meaning of your plot – try changing the values of <code>binwidth</code> and <code>bins</code> below to see what works best.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a><span class="co"># adjust width of each bar</span></span>
<span id="cb44-2"><a href="#cb44-2"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time)) <span class="sc">+</span></span>
<span id="cb44-3"><a href="#cb44-3"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">30</span>)</span>
<span id="cb44-4"><a href="#cb44-4"></a></span>
<span id="cb44-5"><a href="#cb44-5"></a><span class="co"># adjust number of bars</span></span>
<span id="cb44-6"><a href="#cb44-6"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time)) <span class="sc">+</span></span>
<span id="cb44-7"><a href="#cb44-7"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>By default, the bars start <em>centered</em> on 0, so if <code>binwidth</code> is set to 30, the first bar would include -15 to 15 seconds, which doesn’t make much sense. We can set <code>boundary = 0</code> so that each bar represents increments of 30 seconds <em>starting</em> from 0.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time)) <span class="sc">+</span></span>
<span id="cb45-2"><a href="#cb45-2"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">30</span>, <span class="at">boundary =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-histogram-boundary0" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-histogram-boundary0-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-histogram-boundary0-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-histogram-boundary0-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.17: A histogram with the boundary set to 0.
</figcaption></figure>
</div>
</div>
</div>
<p>Finally, the default style of grey bars is ugly, so you can change that by setting the <code>fill</code> and <code>colour</code>, as well as using <code>scale_x_continuous()</code> to update the axis labels.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time)) <span class="sc">+</span></span>
<span id="cb46-2"><a href="#cb46-2"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">15</span>, </span>
<span id="cb46-3"><a href="#cb46-3"></a>                 <span class="at">boundary =</span> <span class="dv">0</span>, </span>
<span id="cb46-4"><a href="#cb46-4"></a>                 <span class="at">fill =</span> <span class="st">"white"</span>, </span>
<span id="cb46-5"><a href="#cb46-5"></a>                 <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb46-6"><a href="#cb46-6"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Wait time (seconds)"</span>,</span>
<span id="cb46-7"><a href="#cb46-7"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">600</span>, <span class="dv">60</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-histogram-custom" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-histogram-custom-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-histogram-custom-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-histogram-custom-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.18: Histogram with custom styles.
</figcaption></figure>
</div>
</div>
</div>
<div class="try callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Test your understanding
</div>
</div>
<div class="callout-body-container callout-body">
<p>Imagine you have a table of the <a href="https://population.un.org/wpp/Download/Standard/Population/" target="_blank">population for each country in the world</a> with the columns <code>country</code> and <code>population</code>. We’ll just look at the 76 countries with populations of less than a million.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="03-viz_files/figure-html/test-one-continuous-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<ul>
<li>How would you set the mapping for this plot?
<div id="radio_JXVTMBGSXD" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_JXVTMBGSXD" value="x"><span>aes(x = country, y = population)</span></label><label><input type="radio" autocomplete="off" name="radio_JXVTMBGSXD" value="x"><span>aes(x = population, y = country)</span></label><label><input type="radio" autocomplete="off" name="radio_JXVTMBGSXD" value="answer"><span>aes(x = population)</span></label><label><input type="radio" autocomplete="off" name="radio_JXVTMBGSXD" value="x"><span>aes(x = population, y = count)</span></label>
</div>
</li>
</ul>
</div>
<ul>
<li>What is the <code>binwidth</code> of the histogram? <select class="webex-select"><option value="blank"></option>
<option value="">1</option>
<option value="">100</option>
<option value="answer">100K</option>
<option value="">1M</option></select>
</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Axis label customisation
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>If you’re curious how we got the x-axis labels to read “100K” instead of “100000”, you just need to add a vector of <code>labels</code> the same length as <code>breaks</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fl">1e6</span>, <span class="fl">1e5</span>),</span>
<span id="cb47-2"><a href="#cb47-2"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="fu">paste0</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">9</span><span class="sc">*</span><span class="dv">100</span>, <span class="st">"K"</span>), <span class="st">"1M"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section><section id="grouped-continuous-variables" class="level3" data-number="3.5.3"><h3 data-number="3.5.3" class="anchored" data-anchor-id="grouped-continuous-variables">
<span class="header-section-number">3.5.3</span> Grouped continuous variables</h3>
<p>There are several ways to compare continuous data across groups. Which you choose depends on what point you are trying to make with the plot.</p>
<section id="stacked-histogram" class="level4" data-number="3.5.3.1"><h4 data-number="3.5.3.1" class="anchored" data-anchor-id="stacked-histogram">
<span class="header-section-number">3.5.3.1</span> Stacked histogram</h4>
<p>In previous plots, we have used <code>fill</code> purely for visual reasons, e.g., we changed the colour of the histogram bars to make them look nicer. However, you can also use <code>fill</code> to represent another variable so that the colours become meaningful.</p>
<p>Setting the <code>fill</code> aesthetic <strong>in the mapping</strong> will produce different coloured bars for each category of the <code>fill</code> variable, in this case <code>issue_category</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time, <span class="at">fill =</span> issue_category)) <span class="sc">+</span></span>
<span id="cb48-2"><a href="#cb48-2"></a>  <span class="fu">geom_histogram</span>(<span class="at">boundary =</span> <span class="dv">0</span>, </span>
<span id="cb48-3"><a href="#cb48-3"></a>                 <span class="at">binwidth =</span> <span class="dv">15</span>,</span>
<span id="cb48-4"><a href="#cb48-4"></a>                 <span class="at">color =</span> <span class="st">"black"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="03-viz_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>Histogram with categories represented by fill.</figcaption></figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Arguments inside aes()
</div>
</div>
<div class="callout-body-container callout-body">
<p>When you set an aspect to represent the data, you do this inside the <code>aes()</code> function for the mapping, not as an argument to the geom. If you try to set this in a geom, you’ll get the following error (unless you coincidentally have an object named <code>issue_category</code> that is a colour word).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time)) <span class="sc">+</span></span>
<span id="cb49-2"><a href="#cb49-2"></a>  <span class="fu">geom_histogram</span>(<span class="at">boundary =</span> <span class="dv">0</span>, </span>
<span id="cb49-3"><a href="#cb49-3"></a>                 <span class="at">binwidth =</span> <span class="dv">15</span>, </span>
<span id="cb49-4"><a href="#cb49-4"></a>                 <span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb49-5"><a href="#cb49-5"></a>                 <span class="at">fill =</span> issue_category)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in eval(expr, envir, enclos): object 'issue_category' not found</code></pre>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-16-contents" aria-controls="callout-16" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Area plot alternative
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-16" class="callout-16-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The function <code>geom_area()</code> gives a similar effect when <code>stat = "bin"</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a><span class="co"># area plot</span></span>
<span id="cb51-2"><a href="#cb51-2"></a><span class="fu">ggplot</span>(survey_data, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> wait_time, <span class="at">fill =</span> issue_category)) <span class="sc">+</span></span>
<span id="cb51-3"><a href="#cb51-3"></a>  <span class="fu">geom_area</span>(<span class="at">stat =</span> <span class="st">"bin"</span>, </span>
<span id="cb51-4"><a href="#cb51-4"></a>            <span class="at">boundary =</span> <span class="dv">0</span>, </span>
<span id="cb51-5"><a href="#cb51-5"></a>            <span class="at">binwidth =</span> <span class="dv">15</span>, </span>
<span id="cb51-6"><a href="#cb51-6"></a>            <span class="at">color =</span> <span class="st">"black"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="03-viz_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>Stacked area plot.</figcaption></figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section id="dodged-histogram" class="level4" data-number="3.5.3.2"><h4 data-number="3.5.3.2" class="anchored" data-anchor-id="dodged-histogram">
<span class="header-section-number">3.5.3.2</span> Dodged histogram</h4>
<p>By default, the categories are positioned stacked on top of each other. If you want to compare more than one distribution, you can set the <code>position</code> argument of <code>geom_histogram()</code> to “dodge” to put the bars for each group next to each other instead of stacking them. However, this can look confusing with several categories.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a><span class="co"># dodged histogram</span></span>
<span id="cb52-2"><a href="#cb52-2"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time, </span>
<span id="cb52-3"><a href="#cb52-3"></a>                        <span class="at">fill =</span> issue_category,</span>
<span id="cb52-4"><a href="#cb52-4"></a>                        <span class="at">colour =</span> issue_category))<span class="sc">+</span></span>
<span id="cb52-5"><a href="#cb52-5"></a>  <span class="fu">geom_histogram</span>(<span class="at">boundary =</span> <span class="dv">0</span>, </span>
<span id="cb52-6"><a href="#cb52-6"></a>                 <span class="at">binwidth =</span> <span class="dv">15</span>, </span>
<span id="cb52-7"><a href="#cb52-7"></a>                 <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb52-8"><a href="#cb52-8"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Wait time (seconds)"</span>,</span>
<span id="cb52-9"><a href="#cb52-9"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">600</span>, <span class="dv">60</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-histogram-dodge" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-histogram-dodge-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-histogram-dodge-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-histogram-dodge-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.19: A histogram with multiple groups.
</figcaption></figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-17-contents" aria-controls="callout-17" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Frequency plot alternative
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-17" class="callout-17-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Alternatively, you can use <code>geom_freqpoly()</code> to plot a line connecting the top of each bin (see <a href="10-custom.html#sec-freqpoly" class="quarto-xref"><span>Section 10.1.4.1.1</span></a>).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a><span class="co"># frequency plot</span></span>
<span id="cb53-2"><a href="#cb53-2"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time,</span>
<span id="cb53-3"><a href="#cb53-3"></a>                        <span class="at">colour =</span> issue_category)) <span class="sc">+</span></span>
<span id="cb53-4"><a href="#cb53-4"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">binwidth =</span> <span class="dv">15</span>, </span>
<span id="cb53-5"><a href="#cb53-5"></a>                <span class="at">boundary =</span> <span class="dv">0</span>,</span>
<span id="cb53-6"><a href="#cb53-6"></a>                <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb53-7"><a href="#cb53-7"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Wait time (seconds)"</span>,</span>
<span id="cb53-8"><a href="#cb53-8"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">600</span>, <span class="dv">60</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output-display">
<div id="fig-groups-freqpoly" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-groups-freqpoly-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-groups-freqpoly-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-groups-freqpoly-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.20: A frequency plot with multiple groups.
</figcaption></figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section id="violin-plot" class="level4" data-number="3.5.3.3"><h4 data-number="3.5.3.3" class="anchored" data-anchor-id="violin-plot">
<span class="header-section-number">3.5.3.3</span> Violin plot</h4>
<p>Another way to compare groups of continuous variables is the violin plot. This is like a density plot, but rotated 90 degrees and mirrored - the fatter the violin, the larger proportion of data points there are at that value.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a>violin_area <span class="ot">&lt;-</span> </span>
<span id="cb55-2"><a href="#cb55-2"></a>  <span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> issue_category, <span class="at">y =</span> wait_time)) <span class="sc">+</span></span>
<span id="cb55-3"><a href="#cb55-3"></a>  <span class="fu">geom_violin</span>() <span class="sc">+</span></span>
<span id="cb55-4"><a href="#cb55-4"></a>  <span class="fu">ggtitle</span>(<span class="st">'scale = "area"'</span>)</span>
<span id="cb55-5"><a href="#cb55-5"></a></span>
<span id="cb55-6"><a href="#cb55-6"></a>violin_count <span class="ot">&lt;-</span> </span>
<span id="cb55-7"><a href="#cb55-7"></a>  <span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> issue_category, <span class="at">y =</span> wait_time)) <span class="sc">+</span></span>
<span id="cb55-8"><a href="#cb55-8"></a>  <span class="fu">geom_violin</span>(<span class="at">scale =</span> <span class="st">"count"</span>) <span class="sc">+</span></span>
<span id="cb55-9"><a href="#cb55-9"></a>  <span class="fu">ggtitle</span>(<span class="st">'scale = "count"'</span>)</span>
<span id="cb55-10"><a href="#cb55-10"></a></span>
<span id="cb55-11"><a href="#cb55-11"></a>violin_area <span class="sc">+</span> violin_count</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-violin-plot" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-violin-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-violin-plot-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-violin-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.21: The default violin plot gives each shape the same area. Set scale=‘count’ to make the size proportional to the number of observations.
</figcaption></figure>
</div>
</div>
</div>
</section><section id="boxplot" class="level4" data-number="3.5.3.4"><h4 data-number="3.5.3.4" class="anchored" data-anchor-id="boxplot">
<span class="header-section-number">3.5.3.4</span> Boxplot</h4>
<p>Boxplots serve a similar purpose to violin plots (without the giggles from the back row). They don’t show you the shape of the distribution, but rather some statistics about it. The middle line represents the <a href="https://psyteachr.github.io/glossary/m#median" target="_blank" class="glossary" title="The middle number in a distribution where half of the values are larger and half are smaller.">median</a>; half the data are above this line and half below it. The box encloses the 25th to 75th percentiles of the data, so 50% of the data falls inside the box. The “whiskers” extending above and below the box extend 1.5 times the height of the box, although you can change this with the <code>coef</code> argument. The points show <a href="https://psyteachr.github.io/glossary/o#outlier" target="_blank" class="glossary" title="A data point that is extremely distant from most of the other data points">outliers</a> – individual data points that fall outside of this range.</p>
<p>Boxplots can be horizontal if you swap to x and y columns, and there are many other customisations you can apply.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1"></a>boxplot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> issue_category, <span class="at">y =</span> wait_time)) <span class="sc">+</span></span>
<span id="cb56-2"><a href="#cb56-2"></a> <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb56-3"><a href="#cb56-3"></a>  <span class="fu">ggtitle</span>(<span class="st">"Default vertical boxplot"</span>)</span>
<span id="cb56-4"><a href="#cb56-4"></a></span>
<span id="cb56-5"><a href="#cb56-5"></a>custom <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">y =</span> issue_category,<span class="at">x =</span> wait_time)) <span class="sc">+</span></span>
<span id="cb56-6"><a href="#cb56-6"></a> <span class="fu">geom_boxplot</span>(<span class="at">fill =</span> <span class="st">"grey80"</span>, </span>
<span id="cb56-7"><a href="#cb56-7"></a>              <span class="at">outlier.colour =</span> <span class="st">"red"</span>,</span>
<span id="cb56-8"><a href="#cb56-8"></a>              <span class="at">outlier.shape =</span> <span class="dv">8</span>,</span>
<span id="cb56-9"><a href="#cb56-9"></a>              <span class="at">coef =</span> <span class="dv">1</span>,   <span class="co"># length of whiskers relative to box</span></span>
<span id="cb56-10"><a href="#cb56-10"></a>              <span class="at">varwidth =</span> <span class="cn">TRUE</span>, <span class="co"># set width proportional to sample size</span></span>
<span id="cb56-11"><a href="#cb56-11"></a>              <span class="at">notch =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb56-12"><a href="#cb56-12"></a>  <span class="fu">ggtitle</span>(<span class="st">"Customised horizontal boxplot"</span>)</span>
<span id="cb56-13"><a href="#cb56-13"></a></span>
<span id="cb56-14"><a href="#cb56-14"></a>boxplot <span class="sc">+</span> custom</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-box-plot" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-box-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-box-plot-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-box-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.22: Boxplots.
</figcaption></figure>
</div>
</div>
</div>
</section><section id="combo-plots" class="level4" data-number="3.5.3.5"><h4 data-number="3.5.3.5" class="anchored" data-anchor-id="combo-plots">
<span class="header-section-number">3.5.3.5</span> Combo plots</h4>
<p>Violin plots are frequently layered with other geoms that represent the mean or median values in the data. This is a lot of code; to help your understanding, run it layer by layer to see how it builds up and change the values throughout the code.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1"></a><span class="co"># add fill and colour to the mapping</span></span>
<span id="cb57-2"><a href="#cb57-2"></a></span>
<span id="cb57-3"><a href="#cb57-3"></a><span class="fu">ggplot</span>(survey_data,  <span class="fu">aes</span>(<span class="at">x =</span> issue_category, </span>
<span id="cb57-4"><a href="#cb57-4"></a>                         <span class="at">y =</span> wait_time,</span>
<span id="cb57-5"><a href="#cb57-5"></a>                         <span class="at">fill =</span> issue_category,</span>
<span id="cb57-6"><a href="#cb57-6"></a>                         <span class="at">colour =</span> issue_category)) <span class="sc">+</span></span>
<span id="cb57-7"><a href="#cb57-7"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">name =</span> <span class="st">"Issue Category"</span>) <span class="sc">+</span></span>
<span id="cb57-8"><a href="#cb57-8"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Wait Time (seconds)"</span>,</span>
<span id="cb57-9"><a href="#cb57-9"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">600</span>, <span class="dv">60</span>)) <span class="sc">+</span></span>
<span id="cb57-10"><a href="#cb57-10"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">360</span>)) <span class="sc">+</span></span>
<span id="cb57-11"><a href="#cb57-11"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>, <span class="at">colour =</span> <span class="st">"none"</span>) <span class="sc">+</span> </span>
<span id="cb57-12"><a href="#cb57-12"></a>  <span class="co"># add a violin plot</span></span>
<span id="cb57-13"><a href="#cb57-13"></a>  <span class="fu">geom_violin</span>(<span class="at">draw_quantiles =</span> <span class="fl">0.5</span>, <span class="co"># adds a line at median (50%) score</span></span>
<span id="cb57-14"><a href="#cb57-14"></a>              <span class="at">alpha =</span> <span class="fl">0.4</span>) <span class="sc">+</span> </span>
<span id="cb57-15"><a href="#cb57-15"></a>  <span class="co"># add a boxplot</span></span>
<span id="cb57-16"><a href="#cb57-16"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="fl">0.25</span>, </span>
<span id="cb57-17"><a href="#cb57-17"></a>               <span class="at">fill =</span> <span class="st">"white"</span>, </span>
<span id="cb57-18"><a href="#cb57-18"></a>               <span class="at">alpha =</span> <span class="fl">0.75</span>, </span>
<span id="cb57-19"><a href="#cb57-19"></a>               <span class="at">fatten =</span> <span class="dv">0</span>, <span class="co"># removes the median line</span></span>
<span id="cb57-20"><a href="#cb57-20"></a>               <span class="at">outlier.alpha =</span> <span class="dv">0</span>) <span class="sc">+</span> </span>
<span id="cb57-21"><a href="#cb57-21"></a>  <span class="co"># add a point that represents the mean</span></span>
<span id="cb57-22"><a href="#cb57-22"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> mean, </span>
<span id="cb57-23"><a href="#cb57-23"></a>               <span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb57-24"><a href="#cb57-24"></a>               <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb57-25"><a href="#cb57-25"></a>  <span class="fu">ggtitle</span>(<span class="st">"ViolinBox"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-violin-combos" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-violin-combos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-violin-combos-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-violin-combos-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.23: Violin plots combined with different methods to represent means and medians.
</figcaption></figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Misleading Bar Charts
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>A very common type of plot is to produce a bar chart of means, however, the example below demonstrates just how misleading this is. It communicates the mean value for each category, but the bars hide the distribution of the actual data. You can’t tell if most wait times are close to 3 minutes, or spread from 0 to 6 minutes, or if the vast majority are less than 2 minutes, but the mean is pulled up by some very high outliers.</p>
<p>Column plots can also be very misleading. The plot on the left starts the y-axis at 0, which makes the bar heights proportional, showing almost no difference in average wait times. Since the differences are hard to see, you may be tempted to start the y-axis higher, but that makes it look like the average wait time for returns is double that for tech.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-col-plot-bad" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-col-plot-bad-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-col-plot-bad-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-col-plot-bad-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.24: Don’t plot continuous data with column plots. They are only appropriate for count data.
</figcaption></figure>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="try callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Test your understanding
</div>
</div>
<div class="callout-body-container callout-body">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="03-viz_files/figure-html/test-grouped-continuous-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>How would you create plot A? <select class="webex-select"><option value="blank"></option>
<option value="x">geom_box()</option>
<option value="x">geom_boxplot()</option>
<option value="answer">geom_violin()</option>
<option value="x">geom_violinplot()</option></select>
</li>
<li>How would you create plot B? <select class="webex-select"><option value="blank"></option>
<option value="x">geom_box()</option>
<option value="answer">geom_boxplot()</option>
<option value="x">geom_violin()</option>
<option value="x">geom_violinplot()</option></select>
</li>
<li>What does the mapping look like for both plots?
<div id="radio_UFPEWIYRCD" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_UFPEWIYRCD" value="x"><span>aes(x = employee_id, y = call_time, fill = call_time)</span></label><label><input type="radio" autocomplete="off" name="radio_UFPEWIYRCD" value="answer"><span>aes(x = employee_id, y = call_time, fill = employee_id)</span></label><label><input type="radio" autocomplete="off" name="radio_UFPEWIYRCD" value="x"><span>aes(x = employee_id, y = call_time, colour = call_time)</span></label><label><input type="radio" autocomplete="off" name="radio_UFPEWIYRCD" value="x"><span>aes(x = employee_id, y = call_time, colour = employee_id)</span></label>
</div>
</li>
<li>Which employee has the longest median call time? <select class="webex-select"><option value="blank"></option>
<option value="x">e01</option>
<option value="x">e02</option>
<option value="x">e03</option>
<option value="answer">e04</option>
<option value="x">e05</option>
<option value="x">e06</option>
<option value="x">e07</option>
<option value="x">e08</option>
<option value="x">e09</option>
<option value="x">e10</option></select>
</li>
<li>Which employee has the record longest call? <select class="webex-select"><option value="blank"></option>
<option value="x">e01</option>
<option value="x">e02</option>
<option value="x">e03</option>
<option value="x">e04</option>
<option value="x">e05</option>
<option value="x">e06</option>
<option value="answer">e07</option>
<option value="x">e08</option>
<option value="x">e09</option>
<option value="x">e10</option></select>
</li>
</ul>
</div>
</div>
</section></section><section id="two-continuous-variables" class="level3" data-number="3.5.4"><h3 data-number="3.5.4" class="anchored" data-anchor-id="two-continuous-variables">
<span class="header-section-number">3.5.4</span> Two continuous variables</h3>
<p>When you want to see how two continuous variables are related, set one as the x-axis and the other as the y-axis. Usually, if one variable causes the other, you plot the cause on the x-axis and the effect on the y-axis. Here, we want to see if longer wait times cause the calls to be longer.</p>
<section id="scatterplot" class="level4" data-number="3.5.4.1"><h4 data-number="3.5.4.1" class="anchored" data-anchor-id="scatterplot">
<span class="header-section-number">3.5.4.1</span> Scatterplot</h4>
<p>The function to create a scatterplot is called <code>geom_point()</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time, <span class="at">y =</span> call_time)) <span class="sc">+</span></span>
<span id="cb58-2"><a href="#cb58-2"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-demo-point" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-demo-point-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-demo-point-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-demo-point-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.25: Scatterplot with geom_point().
</figcaption></figure>
</div>
</div>
</div>
</section><section id="trendlines" class="level4" data-number="3.5.4.2"><h4 data-number="3.5.4.2" class="anchored" data-anchor-id="trendlines">
<span class="header-section-number">3.5.4.2</span> Trendlines</h4>
<p>In <a href="#fig-layers" class="quarto-xref">Figure&nbsp;<span>3.1</span></a>, we emphasised the relationship between wait time and call time with a trendline created by <code>geom_smooth()</code> using the argument <code>method = lm</code> (“lm” stands for “linear model” or a straight line relationship). You can also set <code>method = loess</code> to visualise a non-linear relationship.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a>lm_plot <span class="ot">&lt;-</span> </span>
<span id="cb59-2"><a href="#cb59-2"></a>  <span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time, <span class="at">y =</span> call_time)) <span class="sc">+</span></span>
<span id="cb59-3"><a href="#cb59-3"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb59-4"><a href="#cb59-4"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">formula =</span> y<span class="sc">~</span>x) <span class="sc">+</span></span>
<span id="cb59-5"><a href="#cb59-5"></a>  <span class="fu">ggtitle</span>(<span class="st">"method = lm"</span>)</span>
<span id="cb59-6"><a href="#cb59-6"></a></span>
<span id="cb59-7"><a href="#cb59-7"></a>loess_plot <span class="ot">&lt;-</span> </span>
<span id="cb59-8"><a href="#cb59-8"></a>  <span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> wait_time, <span class="at">y =</span> call_time)) <span class="sc">+</span></span>
<span id="cb59-9"><a href="#cb59-9"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb59-10"><a href="#cb59-10"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> loess, <span class="at">formula =</span> y<span class="sc">~</span>x) <span class="sc">+</span></span>
<span id="cb59-11"><a href="#cb59-11"></a>  <span class="fu">ggtitle</span>(<span class="st">"method = loess"</span>)</span>
<span id="cb59-12"><a href="#cb59-12"></a></span>
<span id="cb59-13"><a href="#cb59-13"></a>lm_plot <span class="sc">+</span> loess_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-2-continuous" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-2-continuous-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-2-continuous-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-2-continuous-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.26: Different ways to show the relationship between two continuous variables.
</figcaption></figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Error shading
</div>
</div>
<div class="callout-body-container callout-body">
<p>If there isn’t much data at the extremes of the x-axis, the curve can be very uncertain. This is represented by the wider shaded area, which means that the true relationship might be anywhere within that area. Add the argument <code>se = FALSE</code> to <code>geom_smooth()</code> to remove this “standard error” shading.</p>
</div>
</div>
</section><section id="dates" class="level4" data-number="3.5.4.3"><h4 data-number="3.5.4.3" class="anchored" data-anchor-id="dates">
<span class="header-section-number">3.5.4.3</span> Dates</h4>
<p>The <code>call_start</code> column contains both a date and a time, so use the <code><a href="https://rdrr.io/r/base/date.html">date()</a></code> function from <pkg>lubridate</pkg> to convert it to just a date. We’ll need it in this format to be able to transform the x-axis below.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> lubridate<span class="sc">::</span><span class="fu">date</span>(call_start), </span>
<span id="cb60-2"><a href="#cb60-2"></a>                        <span class="at">y =</span> satisfaction)) <span class="sc">+</span> </span>
<span id="cb60-3"><a href="#cb60-3"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">formula =</span> y<span class="sc">~</span>x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-date-x" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-date-x-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-date-x-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-date-x-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.27: Plotting dates.
</figcaption></figure>
</div>
</div>
</div>
<p>We can use <code>scale_x_date()</code> to set the <code>date_breaks</code> to be “1 month” apart. The <code>date_labels</code> argument uses a code for different date formats; you can see the full list of possibilities in the help for <code><a href="https://rdrr.io/r/base/strptime.html">?strptime</a></code>. For example, <code>%b</code> means “Abbreviated month name”, whilst if you wanted to use a format like “2020/01/31” you could try <code>"%Y/%m/%d"</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> lubridate<span class="sc">::</span><span class="fu">date</span>(call_start), </span>
<span id="cb61-2"><a href="#cb61-2"></a>                        <span class="at">y =</span> satisfaction)) <span class="sc">+</span></span>
<span id="cb61-3"><a href="#cb61-3"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">formula =</span> y<span class="sc">~</span>x) <span class="sc">+</span></span>
<span id="cb61-4"><a href="#cb61-4"></a>  <span class="fu">scale_x_date</span>(<span class="at">name =</span> <span class="st">""</span>,</span>
<span id="cb61-5"><a href="#cb61-5"></a>               <span class="at">date_breaks =</span> <span class="st">"1 month"</span>, </span>
<span id="cb61-6"><a href="#cb61-6"></a>               <span class="at">date_labels =</span> <span class="st">"%b"</span>) <span class="sc">+</span></span>
<span id="cb61-7"><a href="#cb61-7"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Caller Satisfaction"</span>) <span class="sc">+</span></span>
<span id="cb61-8"><a href="#cb61-8"></a>  <span class="fu">ggtitle</span>(<span class="st">"2020 Caller Satisfaction"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-date-month" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-date-month-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-date-month-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-date-month-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.28: Plotting dates with breaks one month apart.
</figcaption></figure>
</div>
</div>
</div>
<div class="try callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Test yourself
</div>
</div>
<div class="callout-body-container callout-body">
<p>It looks like customer satisfaction declined across the year, but is this change meaningful? See what the plot looks like when the y-axis spans the full range of possible satisfaction values from 1 to 5. You can also plot the individual data points to emphasise the range of values.</p>
<div class="cell" data-layout-align="center" data-webex.hide="true">
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-21-contents" aria-controls="callout-21" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-21" class="callout-21-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> lubridate<span class="sc">::</span><span class="fu">date</span>(call_start), </span>
<span id="cb62-2"><a href="#cb62-2"></a>                        <span class="at">y =</span> satisfaction)) <span class="sc">+</span></span>
<span id="cb62-3"><a href="#cb62-3"></a>  <span class="co"># show individual data, jitter the height to avoid overlap</span></span>
<span id="cb62-4"><a href="#cb62-4"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="dv">0</span>, <span class="at">height =</span> .<span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> </span>
<span id="cb62-5"><a href="#cb62-5"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm,  <span class="at">formula =</span> y<span class="sc">~</span>x) <span class="sc">+</span></span>
<span id="cb62-6"><a href="#cb62-6"></a>  <span class="fu">scale_x_date</span>(<span class="at">name =</span> <span class="st">""</span>,</span>
<span id="cb62-7"><a href="#cb62-7"></a>               <span class="at">date_breaks =</span> <span class="st">"1 month"</span>, </span>
<span id="cb62-8"><a href="#cb62-8"></a>               <span class="at">date_labels =</span> <span class="st">"%b"</span>) <span class="sc">+</span></span>
<span id="cb62-9"><a href="#cb62-9"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Caller Satisfaction"</span>,</span>
<span id="cb62-10"><a href="#cb62-10"></a>                     <span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb62-11"><a href="#cb62-11"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>)) <span class="sc">+</span> <span class="co"># changes limits</span></span>
<span id="cb62-12"><a href="#cb62-12"></a>  <span class="fu">ggtitle</span>(<span class="st">"2020 Caller Satisfaction"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="03-viz_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section></section><section id="overplotting" class="level3" data-number="3.5.5"><h3 data-number="3.5.5" class="anchored" data-anchor-id="overplotting">
<span class="header-section-number">3.5.5</span> Overplotting</h3>
<p>When you have a limited range of numeric values, such as an ordinal rating scale, sometimes overlapping data makes it difficult to see what is going on in a point plot. For example, the plot below shows satisfaction ratings by call time, but because all the ratings are 1, 2, 3, 4 or 5, it makes it hard to see exactly how many data points there are at each point.</p>
<p>In this section, we’ll explore a few options for dealing with this.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> call_time, <span class="at">y =</span> satisfaction)) <span class="sc">+</span> </span>
<span id="cb63-2"><a href="#cb63-2"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-over-plot" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-over-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-over-plot-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-over-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.29: Overlapping data makes plots hard to understand.
</figcaption></figure>
</div>
</div>
</div>
<section id="jitter-plot" class="level4" data-number="3.5.5.1"><h4 data-number="3.5.5.1" class="anchored" data-anchor-id="jitter-plot">
<span class="header-section-number">3.5.5.1</span> Jitter plot</h4>
<p>You can use <code>geom_jitter()</code> to move the points around a bit to make them easier to see. You can also set alpha transparency. Here, the x-axis is continuous, so there is no need to jitter the <code>width</code>, but the y-axis is ordinal categories, so the <code>height</code> is jittered between -0.2 and +0.2 away from the true y-value.</p>
<div class="try callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Change these values to understand what jitter is doing
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> call_time, <span class="at">y =</span> satisfaction)) <span class="sc">+</span></span>
<span id="cb64-2"><a href="#cb64-2"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="dv">0</span>, <span class="at">height =</span> .<span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-jitter-plot" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-jitter-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-jitter-plot-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-jitter-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.30: Jitter plot.
</figcaption></figure>
</div>
</div>
</div>
</section><section id="facets" class="level4" data-number="3.5.5.2"><h4 data-number="3.5.5.2" class="anchored" data-anchor-id="facets">
<span class="header-section-number">3.5.5.2</span> Facets</h4>
<p>Alternatively, you can use <code>facet_wrap()</code> to create a separate plot for each level of satisfaction. <code>facet_wrap()</code> uses the tilde (~) symbol, which you can roughly translate as “by”, e.g., facet the plot <em>by</em> satisfaction rating. The <code>labeller</code> function controls the labels above each plot. <code>label_both</code> specifies that we want both the variable name (satisfaction) and the value (e.g., 1) printed on the plot to make it easier to read.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1"></a><span class="fu">ggplot</span>(survey_data, <span class="fu">aes</span>(<span class="at">x =</span> call_time)) <span class="sc">+</span></span>
<span id="cb65-2"><a href="#cb65-2"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">10</span>, </span>
<span id="cb65-3"><a href="#cb65-3"></a>                 <span class="at">boundary =</span> <span class="dv">0</span>, </span>
<span id="cb65-4"><a href="#cb65-4"></a>                 <span class="at">fill =</span> <span class="st">"dodgerblue"</span>, </span>
<span id="cb65-5"><a href="#cb65-5"></a>                 <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb65-6"><a href="#cb65-6"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>satisfaction, </span>
<span id="cb65-7"><a href="#cb65-7"></a>             <span class="at">ncol =</span> <span class="dv">1</span>, <span class="co"># try changing this to 2 </span></span>
<span id="cb65-8"><a href="#cb65-8"></a>             <span class="at">labeller =</span> label_both) <span class="sc">+</span></span>
<span id="cb65-9"><a href="#cb65-9"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Call Time (seconds)"</span>,</span>
<span id="cb65-10"><a href="#cb65-10"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">600</span>, <span class="dv">30</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-fact-plot" class="quarto-float quarto-figure quarto-figure-center anchored" data-fig-align="center">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-fact-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="03-viz_files/figure-html/fig-fact-plot-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-fact-plot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3.31: A histogram with facets.
</figcaption></figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
More plots styles
</div>
</div>
<div class="callout-body-container callout-body">
<p>These are not, by any means, all the plot types that you can make in R. This chapter just gave you a basic overview, and we will go into more detail in <a href="10-custom.html#sec-custom-viz" class="quarto-xref"><span>Section 10.1</span></a>). The <a href="#resources-viz">further resources</a> section at the end of this chapter lists many resources, but the <a href="http://www.r-graph-gallery.com/" target="_blank">R Graph Gallery</a> is especially useful to get inspiration for the kinds of beautiful plots you can make in R.</p>
</div>
</div>
</section></section></section><section id="exercises" class="level2" data-number="3.6"><h2 data-number="3.6" class="anchored" data-anchor-id="exercises">
<span class="header-section-number">3.6</span> Exercises</h2>
<p>For the final step in this chapter, we will create a report of data visualisations. You may need to refer back to <a href="02-reports.html" class="quarto-xref"><span>Chapter 2</span></a>) to help you complete these exercises and you may also want to take a break before you work through this section. We’d also recommend you <a href="https://psyteachr.github.io/glossary/k#knit" target="_blank" class="glossary" title="To create an HTML, PDF, or Word document from an R Markdown (Rmd) document">knit</a> at every step so that you can see how your output changes.</p>
<section id="sec-exercises-new-rmd-3" class="level3" data-number="3.6.1"><h3 data-number="3.6.1" class="anchored" data-anchor-id="sec-exercises-new-rmd-3">
<span class="header-section-number">3.6.1</span> New Markdown</h3>
<p>Create and save a new R Markdown document named <code>plots_report.Rmd</code> and give it the title “Customer satisfaction report”. Remove the default template text and then load the packages and code below in the set-up code chunk:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a><span class="fu">library</span>(tidyverse) </span>
<span id="cb66-2"><a href="#cb66-2"></a><span class="fu">library</span>(patchwork) </span>
<span id="cb66-3"><a href="#cb66-3"></a><span class="fu">library</span>(ggthemes)  </span>
<span id="cb66-4"><a href="#cb66-4"></a><span class="fu">library</span>(lubridate) </span>
<span id="cb66-5"><a href="#cb66-5"></a><span class="fu">library</span>(knitr)</span>
<span id="cb66-6"><a href="#cb66-6"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb66-7"><a href="#cb66-7"></a></span>
<span id="cb66-8"><a href="#cb66-8"></a>survey_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://psyteachr.github.io/ads-v2/data/survey_data.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="sec-exercises-summary" class="level3" data-number="3.6.2"><h3 data-number="3.6.2" class="anchored" data-anchor-id="sec-exercises-summary">
<span class="header-section-number">3.6.2</span> Summary</h3>
<p>Create a level 1 heading titled “Overview”. Underneath this heading, write a short summary of what the data set contains and what each of the variables means (you can use the information from <a href="#sec-plots-loading-data" class="quarto-xref"><span>Section 3.4.1</span></a> if you like).</p>
</section><section id="presenting-plots" class="level3" data-number="3.6.3"><h3 data-number="3.6.3" class="anchored" data-anchor-id="presenting-plots">
<span class="header-section-number">3.6.3</span> Presenting plots</h3>
<p>Pick your two favourites plots from all the examples we’ve made in this chapter. For each plot:</p>
<ul>
<li>Create a level 2 heading in your R Markdown document and give it an informative title.</li>
<li>Write a short summary that interprets the data shown in the plots - it’s not enough just to present visualisations, effective reports will also help the reader understand the conclusions they should draw from the plots you’ve presented.</li>
<li>Look through the different themes available with <a href="https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/"><pkg>ggtheme</pkg></a> and choose one to apply to your plots.</li>
<li>Make sure each plot has a figure caption (either by adding this to the <code>ggplot()</code> code or adding it to the code chunk options).</li>
<li>Organise your Markdown so that the plots are shown <strong>after</strong> the text summary.</li>
</ul></section><section id="combining-plots-1" class="level3" data-number="3.6.4"><h3 data-number="3.6.4" class="anchored" data-anchor-id="combining-plots-1">
<span class="header-section-number">3.6.4</span> Combining plots</h3>
<p>Now, pick your two least favourite plots:</p>
<ul>
<li>Adjust the visual aesthetics to make them look as bad and as difficult to read as possible.</li>
<li>Combine the plots with the original version using patchwork functions.</li>
<li>Write a short summary that explains why you think these plots are so bad.</li>
<li>Organise your Markdown so that the plots are shown <strong>after</strong> the text summary.</li>
</ul></section><section id="editing-your-markdown-display" class="level3" data-number="3.6.5"><h3 data-number="3.6.5" class="anchored" data-anchor-id="editing-your-markdown-display">
<span class="header-section-number">3.6.5</span> Editing your Markdown display</h3>
<p>Adjust the set-up of your Markdown so that your knitted report does not show any code, messages, or warnings, and all figures are 8 x 5 (see <a href="02-reports.html#sec-rmd-setup" class="quarto-xref"><span>Section 2.7.1</span></a>).</p>
</section><section id="share-your-work" class="level3" data-number="3.6.6"><h3 data-number="3.6.6" class="anchored" data-anchor-id="share-your-work">
<span class="header-section-number">3.6.6</span> Share your work</h3>
<p>Once you’ve completed this activity, post it in the Week 3 channel on Teams so that you can compare which plots you chose and visual style with other learners on the course.</p>
</section></section><section id="sec-glossary-viz" class="level2" data-number="3.7"><h2 data-number="3.7" class="anchored" data-anchor-id="sec-glossary-viz">
<span class="header-section-number">3.7</span> Glossary</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: left;">definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/a#argument" class="glossary" target="_blank">argument</a></td>
<td style="text-align: left;">A variable that provides input to a function.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/c#categorical" class="glossary" target="_blank">categorical</a></td>
<td style="text-align: left;">Data that can only take certain values, such as types of pet.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/c#categorical" class="glossary" target="_blank">categorical</a></td>
<td style="text-align: left;">Data that can only take certain values, such as types of pet.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/c#character" class="glossary" target="_blank">character</a></td>
<td style="text-align: left;">A data type representing strings of text.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/c#chunk" class="glossary" target="_blank">chunk</a></td>
<td style="text-align: left;">A section of code in an R Markdown file</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/c#continuous" class="glossary" target="_blank">continuous</a></td>
<td style="text-align: left;">Data that can take on any values between other existing values.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/c#continuous" class="glossary" target="_blank">continuous</a></td>
<td style="text-align: left;">Data that can take on any values between other existing values.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/d#data-type" class="glossary" target="_blank">data-type</a></td>
<td style="text-align: left;">The kind of data represented by an object.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/d#default-value" class="glossary" target="_blank">default-value</a></td>
<td style="text-align: left;">A value that a function uses for an argument if it is skipped.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/d#double" class="glossary" target="_blank">double</a></td>
<td style="text-align: left;">A data type representing a real decimal number</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/f#factor" class="glossary" target="_blank">factor</a></td>
<td style="text-align: left;">A data type where a specific set of values are stored with labels; An explanatory variable manipulated by the experimenter</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/g#geom" class="glossary" target="_blank">geom</a></td>
<td style="text-align: left;">The geometric style in which data are displayed, such as boxplot, density, or histogram.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/i#integer" class="glossary" target="_blank">integer</a></td>
<td style="text-align: left;">A data type representing whole numbers.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/k#knit" class="glossary" target="_blank">knit</a></td>
<td style="text-align: left;">To create an HTML, PDF, or Word document from an R Markdown (Rmd) document</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/l#likert" class="glossary" target="_blank">likert</a></td>
<td style="text-align: left;">A rating scale with a small number of discrete points in order</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/l#logical" class="glossary" target="_blank">logical</a></td>
<td style="text-align: left;">A data type representing TRUE or FALSE values.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/m#median" class="glossary" target="_blank">median</a></td>
<td style="text-align: left;">The middle number in a distribution where half of the values are larger and half are smaller.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/n#nominal" class="glossary" target="_blank">nominal</a></td>
<td style="text-align: left;">Categorical variables that don't have an inherent order, such as types of animal.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/n#numeric" class="glossary" target="_blank">numeric</a></td>
<td style="text-align: left;">A data type representing a real decimal number or integer.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/o#observation" class="glossary" target="_blank">observation</a></td>
<td style="text-align: left;">All of the data about a single trial or question.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/o#ordinal" class="glossary" target="_blank">ordinal</a></td>
<td style="text-align: left;">Discrete variables that have an inherent order, such as level of education or dislike/like.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/o#outlier" class="glossary" target="_blank">outlier</a></td>
<td style="text-align: left;">A data point that is extremely distant from most of the other data points</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/r#r-markdown" class="glossary" target="_blank">r-markdown</a></td>
<td style="text-align: left;">The R-specific version of markdown: a way to specify formatting, such as headers, paragraphs, lists, bolding, and links, as well as code blocks and inline code.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/s#string" class="glossary" target="_blank">string</a></td>
<td style="text-align: left;">A piece of text inside of quotes.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/t#tidy-data" class="glossary" target="_blank">tidy-data</a></td>
<td style="text-align: left;">A format for data that maps the meaning onto the structure.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/v#value" class="glossary" target="_blank">value</a></td>
<td style="text-align: left;">A single number or piece of data.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/v#variable" class="glossary" target="_blank">variable</a></td>
<td style="text-align: left;">(coding): A word that identifies and stores the value of some data for later use; (stats): An attribute or characteristic of an observation that you can measure, count, or describe</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/v#vector" class="glossary" target="_blank">vector</a></td>
<td style="text-align: left;">A type of data structure that collects values with the same data type, like T/F values, numbers, or strings.</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section id="sec-resources-viz" class="level2" data-number="3.8"><h2 data-number="3.8" class="anchored" data-anchor-id="sec-resources-viz">
<span class="header-section-number">3.8</span> Further Resources</h2>
<ul>
<li><a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-visualization.pdf">ggplot2 cheat sheet</a></li>
<li>
<a href="https://psyteachr.github.io/introdataviz/">Data visualisation using R, for researchers who don’t use R</a> <span class="citation" data-cites="nordmann_2021">(<a href="11-refs.html#ref-nordmann_2021" role="doc-biblioref">Nordmann et al., 2021</a>)</span>
</li>
<li>
<a href="https://r4ds.hadley.nz/data-visualize">Chapter 1: Data Visualisation</a> of <em>R for Data Science</em>
</li>
<li><a href="https://ggplot2.tidyverse.org/articles/">ggplot2 FAQs</a></li>
<li><a href="https://ggplot2.tidyverse.org/reference/">ggplot2 documentation</a></li>
<li>
<a href="https://psyteachr.github.io/hack-your-data/">Hack Your Data Beautiful</a> workshop by University of Glasgow postgraduate students</li>
<li>
<a href="http://r4ds.had.co.nz/graphics-for-communication.html">Chapter 28: Graphics for communication</a> of <em>R for Data Science</em>
</li>
<li>
<a href="https://gganimate.com/">gganimate</a>: A package for making animated plots</li>
</ul>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" data-line-spacing="2" role="list" style="display: none">
<div id="ref-nordmann_2021" class="csl-entry" role="listitem">
Nordmann, E., McAleer, P., Toivo, W., Paterson, H., &amp; DeBruine, L. M. (2021). <em>Data visualisation using <span>R</span>, for researchers who don’t use <span>R</span></em>. PsyArXiv. <a href="https://doi.org/10.31234/osf.io/4huvw">https://doi.org/10.31234/osf.io/4huvw</a>
</div>
</div>
</section></main><!-- /main --><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script><script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;

    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    $(solveme[i]).after(" <span class='webex-icon'></span>");
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    $(selects[i]).after(" <span class='webex-icon'></span>");
  }

  update_total_correct();
}

</script><script>
$( document ).ready(function() {
  var cite = ' ';
  var psyteachr = ' <a href="https://psyteachr.github.io/"><img src="images/logos/psyteachr_logo.png" style="height: 31px; color: white;" alt="psyTeachR: Reproducible Research" /></a>';
  var license = ' <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>';

  $("footer div.row div:eq(1) p").html(
    psyteachr + license + cite
  );

  function move_sidebar() {
    var w = window.innerWidth;
    if (w < 992) {
      $("#toc").appendTo($("#main-nav"));
    } else {
      $("#toc").appendTo($("div.sidebar-chapter"));
    }
  }
  move_sidebar();
  window.onresize = move_sidebar;
});
</script><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./02-reports.html" class="pagination-link" aria-label="Reports with R Markdown">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Reports with R Markdown</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./04-summary.html" class="pagination-link" aria-label="Data Summaries">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data Summaries</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>CC-BY 2024, psyTeachR</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/psyteachr/ads-v3/edit/master/03-viz.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/psyteachr/ads-v3/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li><li><a href="https://github.com/psyteachr/ads-v3/blob/master/03-viz.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/psyteachr/ads-v3">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/psyteachr">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://doi.org/10.5281/zenodo.6365077">
      <i class="bi bi-https://zenodo.org/badge/DOI/10.5281/zenodo.6365077.svg" role="img">
</i> 
    </a>
  </li>  
</ul>
</div>
  </div>
</footer>


</body></html>