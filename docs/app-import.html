<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Appendix G — Data Import – Applied Data Skills - Abridged</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./app-datatypes.html" rel="next">
<link href="./app-debugging.html" rel="prev">
<link href="./images/logos/favicon.ico" rel="icon">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-6NP3MF25W3"></script><script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-6NP3MF25W3', { 'anonymize_ip': true});
</script><link rel="stylesheet" href="include/psyteachr.css">
<link rel="stylesheet" href="include/webex.css">
<link rel="stylesheet" href="include/style.css">
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./app-installing-r.html">Appendices</a></li><li class="breadcrumb-item"><a href="./app-import.html"><span class="chapter-number">G</span>&nbsp; <span class="chapter-title">Data Import</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Applied Data Skills - Abridged</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/psyteachr/ads-v3/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
<li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=%7Curl%7C">
              <i class="bi bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=%7Curl%7C">
              <i class="bi bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=%7Curl%7C">
              <i class="bi bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
</div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Intro to R and RStudio</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-reports.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Reports with R Markdown</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-viz.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Visualisation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data Summaries</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-formative.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Practice Report</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-ai.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Coding with AI</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-joins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data Relations</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-tidy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Data Tidying</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-wrangle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Data Wrangling</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-custom.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Customising Visualisations &amp; Reports</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-refs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-license.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">License/Citation</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-installing-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Installing R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-updating-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Updating R, RStudio, and packages</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-symbols.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Symbols</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-conventions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Conventions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-teams.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">Using Teams</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-debugging.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">F</span>&nbsp; <span class="chapter-title">Debugging</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-import.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">G</span>&nbsp; <span class="chapter-title">Data Import</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-datatypes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">H</span>&nbsp; <span class="chapter-title">Data Types</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-dates.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">I</span>&nbsp; <span class="chapter-title">Dates and Times</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-styling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">J</span>&nbsp; <span class="chapter-title">Styling Plots</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./app-webpage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">K</span>&nbsp; <span class="chapter-title">Webpages</span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar"><div class="quarto-margin-header"><div class="margin-header-item">
<p><a href="https://doi.org/10.5281/zenodo.6365077"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.6365077.svg" alt="DOI"></a></p>
</div></div>
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#sec-ilo-data" id="toc-sec-ilo-data" class="nav-link active" data-scroll-target="#sec-ilo-data">Intended Learning Outcomes</a></li>
  <li><a href="#sec-walkthrough-data" id="toc-sec-walkthrough-data" class="nav-link" data-scroll-target="#sec-walkthrough-data">Walkthrough video</a></li>
  <li><a href="#sec-setup-data" id="toc-sec-setup-data" class="nav-link" data-scroll-target="#sec-setup-data"><span class="header-section-number">G.1</span> Set-up</a></li>
  <li><a href="#sec-builtin" id="toc-sec-builtin" class="nav-link" data-scroll-target="#sec-builtin"><span class="header-section-number">G.2</span> Built-in data</a></li>
  <li>
<a href="#looking-at-data" id="toc-looking-at-data" class="nav-link" data-scroll-target="#looking-at-data"><span class="header-section-number">G.3</span> Looking at data</a>
  <ul class="collapse">
<li><a href="#view" id="toc-view" class="nav-link" data-scroll-target="#view"><span class="header-section-number">G.3.1</span> View()</a></li>
  <li><a href="#print" id="toc-print" class="nav-link" data-scroll-target="#print"><span class="header-section-number">G.3.2</span> print()</a></li>
  <li><a href="#glimpse" id="toc-glimpse" class="nav-link" data-scroll-target="#glimpse"><span class="header-section-number">G.3.3</span> glimpse()</a></li>
  <li><a href="#sec-summary-function" id="toc-sec-summary-function" class="nav-link" data-scroll-target="#sec-summary-function"><span class="header-section-number">G.3.4</span> summary()</a></li>
  </ul>
</li>
  <li>
<a href="#sec-import_data" id="toc-sec-import_data" class="nav-link" data-scroll-target="#sec-import_data"><span class="header-section-number">G.4</span> Importing data</a>
  <ul class="collapse">
<li><a href="#rioimport" id="toc-rioimport" class="nav-link" data-scroll-target="#rioimport"><span class="header-section-number">G.4.1</span> rio::import()</a></li>
  <li><a href="#file-type-specific-import" id="toc-file-type-specific-import" class="nav-link" data-scroll-target="#file-type-specific-import"><span class="header-section-number">G.4.2</span> File type specific import</a></li>
  <li><a href="#sec-col_types" id="toc-sec-col_types" class="nav-link" data-scroll-target="#sec-col_types"><span class="header-section-number">G.4.3</span> Column data types</a></li>
  </ul>
</li>
  <li><a href="#creating-data" id="toc-creating-data" class="nav-link" data-scroll-target="#creating-data"><span class="header-section-number">G.5</span> Creating data</a></li>
  <li><a href="#writing-data" id="toc-writing-data" class="nav-link" data-scroll-target="#writing-data"><span class="header-section-number">G.6</span> Writing data</a></li>
  <li><a href="#troubleshooting" id="toc-troubleshooting" class="nav-link" data-scroll-target="#troubleshooting"><span class="header-section-number">G.7</span> Troubleshooting</a></li>
  <li><a href="#working-with-real-data" id="toc-working-with-real-data" class="nav-link" data-scroll-target="#working-with-real-data"><span class="header-section-number">G.8</span> Working with real data</a></li>
  <li>
<a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises"><span class="header-section-number">G.9</span> Exercises</a>
  <ul class="collapse">
<li><a href="#sec-exercises-new-rmd-4" id="toc-sec-exercises-new-rmd-4" class="nav-link" data-scroll-target="#sec-exercises-new-rmd-4"><span class="header-section-number">G.9.1</span> New Markdown</a></li>
  <li><a href="#sec-exercises-load" id="toc-sec-exercises-load" class="nav-link" data-scroll-target="#sec-exercises-load"><span class="header-section-number">G.9.2</span> Import and export the dataset</a></li>
  <li><a href="#convert-column-types" id="toc-convert-column-types" class="nav-link" data-scroll-target="#convert-column-types"><span class="header-section-number">G.9.3</span> Convert column types</a></li>
  <li><a href="#sec-exercises-plots" id="toc-sec-exercises-plots" class="nav-link" data-scroll-target="#sec-exercises-plots"><span class="header-section-number">G.9.4</span> Plots</a></li>
  <li><a href="#make-it-look-nice" id="toc-make-it-look-nice" class="nav-link" data-scroll-target="#make-it-look-nice"><span class="header-section-number">G.9.5</span> Make it look nice</a></li>
  </ul>
</li>
  <li><a href="#sec-glossary-data" id="toc-sec-glossary-data" class="nav-link" data-scroll-target="#sec-glossary-data"><span class="header-section-number">G.10</span> Glossary</a></li>
  <li><a href="#sec-resources-data" id="toc-sec-resources-data" class="nav-link" data-scroll-target="#sec-resources-data"><span class="header-section-number">G.11</span> Further resources</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/psyteachr/ads-v3/edit/master/app-import.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/psyteachr/ads-v3/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li><li><a href="https://github.com/psyteachr/ads-v3/blob/master/app-import.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./app-installing-r.html">Appendices</a></li><li class="breadcrumb-item"><a href="./app-import.html"><span class="chapter-number">G</span>&nbsp; <span class="chapter-title">Data Import</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="sec-data" class="quarto-section-identifier">Appendix G — Data Import</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><p>THIS APPENDIX IS BEING UPDATED…</p>
<section id="sec-ilo-data" class="level2 unnumbered"><h2 class="unnumbered anchored" data-anchor-id="sec-ilo-data">Intended Learning Outcomes</h2>
<ul>
<li>Be able to inspect data</li>
<li>Be able to import data from a range of sources</li>
<li>Be able to identify and handle common problems with data import</li>
</ul></section><section id="sec-walkthrough-data" class="level2 unnumbered"><h2 class="unnumbered anchored" data-anchor-id="sec-walkthrough-data">Walkthrough video</h2>
<p>There is a walkthrough video of this chapter available via <a href="https://echo360.org.uk/media/52d2249e-a737-42b4-bf55-267e39fc05c5/public">Echo360.</a> Please note that there may have been minor edits to the book since the video was recorded. Where there are differences, the book should always take precedence.</p>
</section><section id="sec-setup-data" class="level2" data-number="G.1"><h2 data-number="G.1" class="anchored" data-anchor-id="sec-setup-data">
<span class="header-section-number">G.1</span> Set-up</h2>
<p>Create a new project for the work we’ll do in this chapter named <code class="path">app-data-import</code>. Then, create and save a new R Markdown document named <code>data.Rmd</code>, get rid of the default template text, and load the packages in the set-up code chunk. You should have all of these packages installed already, but if you get the message <code>Error in library(x) : there is no package called ‘x’</code>, please refer to <a href="01-intro.html#sec-install-package" class="quarto-xref"><span>Section 1.4.1</span></a>.</p>
<div class="cell" data-layout-align="center" data-verbatim="r setup, include=FALSE">
<div class="verbatim">
<pre class="sourceCode r code-with-copy"><code class="sourceCode R">```{r setup, include=FALSE}</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidyverse)     <span class="co"># includes readr &amp; tibble</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(rio)           <span class="co"># for almost any data import/export</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(haven)         <span class="co"># for SPSS, Stata,and SAS files</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(readxl)        <span class="co"># for Excel files</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(googlesheets4) <span class="co"># for Google Sheets</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="sourceCode r code-with-copy"><code class="sourceCode R">```</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
</div>
</div>
<p>We’d recommend making a new code chunk for each different activity, and using the white space to make notes on any errors you make, things you find interesting, or questions you’d like to ask the course team.</p>
<p>Download the <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-import.pdf">Data import cheatsheet</a>.</p>
</section><section id="sec-builtin" class="level2" data-number="G.2"><h2 data-number="G.2" class="anchored" data-anchor-id="sec-builtin">
<span class="header-section-number">G.2</span> Built-in data</h2>
<p>You’ll likely want to import you own data to work with, however, Base R also comes with built-in datasets and these can be very useful for learning new functions and packages. Additionally, some packages, like <pkg>tidyr</pkg>, also contain data. The <code><a href="https://rdrr.io/r/utils/data.html">data()</a></code> function lists the datasets available.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># list datasets built in to base R</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">data</span>()</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co"># lists datasets in a specific package</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="fu">data</span>(<span class="at">package =</span> <span class="st">"tidyr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Type the name of a dataset into the <a href="https://psyteachr.github.io/glossary/c#console" target="_blank" class="glossary" title="The pane in RStudio where you can type in commands and view output messages.">console</a> to see the data. For example, type <code>?table1</code> into the console to see the dataset description for <code>table1</code>, which is a dataset included with <pkg>tidyr</pkg>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>?table1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can also use the <code><a href="https://rdrr.io/r/utils/data.html">data()</a></code> function to load a dataset into your <a href="https://psyteachr.github.io/glossary/g#global-environment" target="_blank" class="glossary" title="The interactive workspace where your script runs">global environment</a>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># loads table1 into the environment</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="fu">data</span>(<span class="st">"table1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="looking-at-data" class="level2" data-number="G.3"><h2 data-number="G.3" class="anchored" data-anchor-id="looking-at-data">
<span class="header-section-number">G.3</span> Looking at data</h2>
<p>Now that you’ve loaded some data, look the upper right hand window of RStudio, under the Environment tab. You will see the object <code>table1</code> listed, along with the number of observations (rows) and variables (columns). This is your first check that everything went OK.</p>
<p><strong>Always, always, always, look at your data once you’ve created or loaded a table</strong>. Also look at it after each step that transforms your table. There are three main ways to look at your table: <code><a href="https://rdrr.io/r/utils/View.html">View()</a></code>, <code><a href="https://rdrr.io/r/base/print.html">print()</a></code>, <code><a href="https://pillar.r-lib.org/reference/glimpse.html">tibble::glimpse()</a></code>.</p>
<section id="view" class="level3" data-number="G.3.1"><h3 data-number="G.3.1" class="anchored" data-anchor-id="view">
<span class="header-section-number">G.3.1</span> View()</h3>
<p>A familiar way to look at the table is given by <code><a href="https://rdrr.io/r/utils/View.html">View()</a></code> (uppercase ‘V’), which opens up a data table in the console pane using a viewer that looks a bit like Excel. This command can be useful in the console, but don’t ever put this one in a script because it will create an annoying pop-up window when the user runs it. You can also click on an object in the <a href="https://psyteachr.github.io/glossary/p#panes" target="_blank" class="glossary" title="RStudio is arranged with four window “panes”.">environment pane</a> to open it in the same interface. You can close the tab when you’re done looking at it; it won’t remove the object.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">View</span>(table1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="print" class="level3" data-number="G.3.2"><h3 data-number="G.3.2" class="anchored" data-anchor-id="print">
<span class="header-section-number">G.3.2</span> print()</h3>
<p>The <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> method can be run explicitly, but is more commonly called by just typing the variable name on a blank line. The default is not to print the entire table, but just the first 10 rows.</p>
<p>Let’s look at the <code>table1</code> table that we loaded above. Depending on how wide your screen is, you might need to click on an arrow at the right of the table to see the last column.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># call print explicitly</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="fu">print</span>(table1)</span>
<span id="cb6-3"><a href="#cb6-3"></a></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co"># more common method of just calling object name</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>table1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">country</th>
<th style="text-align: right;">year</th>
<th style="text-align: right;">cases</th>
<th style="text-align: right;">population</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">745</td>
<td style="text-align: right;">19987071</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">2000</td>
<td style="text-align: right;">2666</td>
<td style="text-align: right;">20595360</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">37737</td>
<td style="text-align: right;">172006362</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">2000</td>
<td style="text-align: right;">80488</td>
<td style="text-align: right;">174504898</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">212258</td>
<td style="text-align: right;">1272915272</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: right;">2000</td>
<td style="text-align: right;">213766</td>
<td style="text-align: right;">1280428583</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section><section id="glimpse" class="level3" data-number="G.3.3"><h3 data-number="G.3.3" class="anchored" data-anchor-id="glimpse">
<span class="header-section-number">G.3.3</span> glimpse()</h3>
<p>The function <code><a href="https://pillar.r-lib.org/reference/glimpse.html">tibble::glimpse()</a></code> gives a sideways version of the table. This is useful if the table is very wide and you can’t easily see all of the columns. It also tells you the <a href="https://psyteachr.github.io/glossary/d#data-type" target="_blank" class="glossary" title="The kind of data represented by an object.">data type</a> of each column in angled brackets after each column name.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">glimpse</span>(table1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 6
Columns: 4
$ country    &lt;chr&gt; "Afghanistan", "Afghanistan", "Brazil", "Brazil", "China", …
$ year       &lt;dbl&gt; 1999, 2000, 1999, 2000, 1999, 2000
$ cases      &lt;dbl&gt; 745, 2666, 37737, 80488, 212258, 213766
$ population &lt;dbl&gt; 19987071, 20595360, 172006362, 174504898, 1272915272, 12804…</code></pre>
</div>
</div>
</section><section id="sec-summary-function" class="level3" data-number="G.3.4"><h3 data-number="G.3.4" class="anchored" data-anchor-id="sec-summary-function">
<span class="header-section-number">G.3.4</span> summary()</h3>
<p>You can get a quick summary of a dataset with the <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> function, which can be useful for spotting things like if the minimum or maximum values are clearly wrong, or if R thinks that a &lt;a href=‘https://psyteachr.github.io/glossary/n#nominal’ target=’_blank’ class=‘glossary’ title=‘Categorical variables that don’t have an inherent order, such as types of animal.’&gt;nominal variable is <a href="https://psyteachr.github.io/glossary/n#numeric" target="_blank" class="glossary" title="A data type representing a real decimal number or integer.">numeric</a>. For example, if you had labelled gender as 1, 2, and 3 rather than male, female, and non-binary, <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> would calculate a mean and median even though this isn’t appropriate for the data. This can be a useful flag that you need to take further steps to correct your data.</p>
<p>Note that because <code>population</code> is a very, very large number, R will use <a href="https://courses.lumenlearning.com/waymakerintermediatealgebra/chapter/read-writing-scientific-notation-2/">scientific notation</a>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">summary</span>(table1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   country               year          cases          population       
 Length:6           Min.   :1999   Min.   :   745   Min.   :1.999e+07  
 Class :character   1st Qu.:1999   1st Qu.: 11434   1st Qu.:5.845e+07  
 Mode  :character   Median :2000   Median : 59112   Median :1.733e+08  
                    Mean   :2000   Mean   : 91277   Mean   :4.901e+08  
                    3rd Qu.:2000   3rd Qu.:179316   3rd Qu.:9.983e+08  
                    Max.   :2000   Max.   :213766   Max.   :1.280e+09  </code></pre>
</div>
</div>
</section></section><section id="sec-import_data" class="level2" data-number="G.4"><h2 data-number="G.4" class="anchored" data-anchor-id="sec-import_data">
<span class="header-section-number">G.4</span> Importing data</h2>
<p>Built-in data are nice for examples, but you’re probably more interested in your own data. There are many different types of files that you might work with when doing data analysis. These different file types are usually distinguished by the three-letter <a href="https://psyteachr.github.io/glossary/e#extension" target="_blank" class="glossary" title="The end part of a file name that tells you what type of file it is (e.g., .R or .Rmd).">extension</a> following a period at the end of the file name (e.g., <code>.xls</code>).</p>
<p>Download this <a href="data/data.zip">directory of data files</a>, unzip the folder, and save the <code>data</code> directory in the <code>04-data</code> project directory.</p>
<section id="rioimport" class="level3" data-number="G.4.1"><h3 data-number="G.4.1" class="anchored" data-anchor-id="rioimport">
<span class="header-section-number">G.4.1</span> rio::import()</h3>
<p>The type of data files you have to work with will likely depend on the software that you typically use in your workflow. The <pkg>rio</pkg> package has very straightforward functions for reading and saving data in most common formats: <code>rio::import()</code> and <code>rio::export()</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>demo_tsv  <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"data/demo.tsv"</span>)  <span class="co"># tab-separated values</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>demo_csv  <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"data/demo.csv"</span>)  <span class="co"># comma-separated values</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>demo_xls  <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"data/demo.xlsx"</span>) <span class="co"># Excel format</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>demo_sav  <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"data/demo.sav"</span>)  <span class="co"># SPSS format</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="file-type-specific-import" class="level3" data-number="G.4.2"><h3 data-number="G.4.2" class="anchored" data-anchor-id="file-type-specific-import">
<span class="header-section-number">G.4.2</span> File type specific import</h3>
<p>However, it is also useful to know the specific functions that are used to import different file types because it is easier to discover features to deal with complicated cases, such as when you need to skip rows, rename columns, or choose which Excel sheet to use.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>demo_tsv <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_tsv</span>(<span class="st">"data/demo.tsv"</span>)</span>
<span id="cb12-2"><a href="#cb12-2"></a>demo_csv <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"data/demo.csv"</span>)</span>
<span id="cb12-3"><a href="#cb12-3"></a>demo_xls <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">"data/demo.xlsx"</span>)</span>
<span id="cb12-4"><a href="#cb12-4"></a>demo_sav <span class="ot">&lt;-</span> haven<span class="sc">::</span><span class="fu">read_sav</span>(<span class="st">"data/demo.sav"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="try callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Look at the help for each function above and read through the Arguments section to see how you can customise import.</p>
</div>
</div>
<p>If you keep data in Google Sheets, you can access it directly from R using <code>&lt;pkg&gt;googlesheets4", "https://googlesheets4.tidyverse.org/")</code>. The code below imports data from a <a href="https://docs.google.com/spreadsheets/d/16dkq0YL0J7fyAwT1pdgj1bNNrheckAU_2-DKuuM6aGI" target="_blank">public sheet</a>. You can set the <code>ss</code> argument to the entire <a href="https://psyteachr.github.io/glossary/u#url" target="_blank" class="glossary" title="The address of a web page (uniform resource locator)">URL</a> for the target sheet, or just the section after “https://docs.google.com/spreadsheets/d/”.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">gs4_deauth</span>() <span class="co"># skip authorisation for public data</span></span>
<span id="cb13-2"><a href="#cb13-2"></a></span>
<span id="cb13-3"><a href="#cb13-3"></a>demo_gs4  <span class="ot">&lt;-</span> googlesheets4<span class="sc">::</span><span class="fu">read_sheet</span>(</span>
<span id="cb13-4"><a href="#cb13-4"></a>  <span class="at">ss =</span> <span class="st">"16dkq0YL0J7fyAwT1pdgj1bNNrheckAU_2-DKuuM6aGI"</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="sec-col_types" class="level3" data-number="G.4.3"><h3 data-number="G.4.3" class="anchored" data-anchor-id="sec-col_types">
<span class="header-section-number">G.4.3</span> Column data types</h3>
<p>Use <code>glimpse()</code> to see how these different functions imported the data with slightly different data types. This is because the different file types store data slightly differently. For example, SPSS stores factors as numbers, so the <code>factor</code> column contains the values 1, 2, 3 rather than <code>low</code>, <code>med</code>, <code>high</code>. It also stores <a href="https://psyteachr.github.io/glossary/l#logical" target="_blank" class="glossary" title="A data type representing TRUE or FALSE values.">logical</a> values as 0 and 1 instead or TRUE and FALSE.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="fu">glimpse</span>(demo_csv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 6
Columns: 6
$ character &lt;chr&gt; "A", "B", "C", "D", "E", "F"
$ factor    &lt;chr&gt; "high", "low", "med", "high", "low", "med"
$ integer   &lt;dbl&gt; 1, 2, 3, 4, 5, 6
$ double    &lt;dbl&gt; 1.5, 2.5, 3.5, 4.5, 5.5, 6.5
$ logical   &lt;lgl&gt; TRUE, TRUE, FALSE, FALSE, NA, TRUE
$ date      &lt;date&gt; 2024-04-23, 2024-04-22, 2024-04-21, 2024-04-20, 2024-04-19, …</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">glimpse</span>(demo_xls)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 6
Columns: 6
$ character &lt;chr&gt; "A", "B", "C", "D", "E", "F"
$ factor    &lt;chr&gt; "high", "low", "med", "high", "low", "med"
$ integer   &lt;dbl&gt; 1, 2, 3, 4, 5, 6
$ double    &lt;dbl&gt; 1.5, 2.5, 3.5, 4.5, 5.5, 6.5
$ logical   &lt;lgl&gt; TRUE, TRUE, FALSE, FALSE, NA, TRUE
$ date      &lt;dttm&gt; 2024-04-23, 2024-04-22, 2024-04-21, 2024-04-20, 2024-04-19, …</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">glimpse</span>(demo_sav)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 6
Columns: 6
$ character &lt;chr&gt; "A", "B", "C", "D", "E", "F"
$ factor    &lt;dbl+lbl&gt; 3, 1, 2, 3, 1, 2
$ integer   &lt;dbl&gt; 1, 2, 3, 4, 5, 6
$ double    &lt;dbl&gt; 1.5, 2.5, 3.5, 4.5, 5.5, 6.5
$ logical   &lt;dbl&gt; 1, 1, 0, 0, NA, 1
$ date      &lt;date&gt; 2024-04-23, 2024-04-22, 2024-04-21, 2024-04-20, 2024-04-19, …</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">glimpse</span>(demo_gs4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 6
Columns: 6
$ character &lt;chr&gt; "A", "B", "C", "D", "E", "F"
$ factor    &lt;chr&gt; "high", "low", "med", "high", "low", "med"
$ integer   &lt;dbl&gt; 1, 2, 3, 4, 5, 6
$ double    &lt;dbl&gt; 1.5, 2.5, 3.5, 4.5, 5.5, 6.5
$ logical   &lt;lgl&gt; TRUE, TRUE, FALSE, FALSE, NA, TRUE
$ date      &lt;dttm&gt; 2021-11-22, 2021-11-21, 2021-11-20, 2021-11-19, 2021-11-18, …</code></pre>
</div>
</div>
<p>The <pkg>readr</pkg> functions display a message when you import data explaining what <a href="https://psyteachr.github.io/glossary/d#data-type" target="_blank" class="glossary" title="The kind of data represented by an object.">data type</a> each column is.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>demo <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"data/demo.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 6 Columns: 6
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (2): character, factor
dbl  (2): integer, double
lgl  (1): logical
date (1): date

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>The “Column specification” tells you which <a href="https://psyteachr.github.io/glossary/d#data-type" target="_blank" class="glossary" title="The kind of data represented by an object.">data type</a> each column is. You can review data types in <a href="app-datatypes.html" class="quarto-xref"><span>Appendix H</span></a>. Options are:</p>
<ul>
<li>
<code>chr</code>: <a href="https://psyteachr.github.io/glossary/c#character" target="_blank" class="glossary" title="A data type representing strings of text.">character</a>
</li>
<li>
<code>dbl</code>: <a href="https://psyteachr.github.io/glossary/d#double" target="_blank" class="glossary" title="A data type representing a real decimal number">double</a>
</li>
<li>
<code>lgl</code>: <a href="https://psyteachr.github.io/glossary/l#logical" target="_blank" class="glossary" title="A data type representing TRUE or FALSE values.">logical</a>
</li>
<li>
<code>int</code>: <a href="https://psyteachr.github.io/glossary/i#integer" target="_blank" class="glossary" title="A data type representing whole numbers.">integer</a>
</li>
<li>
<code>date</code>: date</li>
<li>
<code>dttm</code>: date/time</li>
</ul>
<p><code>read_csv()</code> will guess what type of data each variable is and normally it is pretty good at this. However, if it makes a mistake, such as reading the “date” column as a <a href="https://psyteachr.github.io/glossary/c#character" target="_blank" class="glossary" title="A data type representing strings of text.">character</a>, you can manually set the column data types.</p>
<p>First, run <code>spec()</code> on the dataset which will give you the full column specification that you can copy and paste:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="fu">spec</span>(demo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>cols(
  character = col_character(),
  factor = col_character(),
  integer = col_double(),
  double = col_double(),
  logical = col_logical(),
  date = col_date(format = "")
)</code></pre>
</div>
</div>
<p>Then, we create an object using the code we just copied that lists the correct column types. Factor columns will always import as character data types, so you have to set their data type manually with <code>col_factor()</code> and set the order of levels with the <code>levels</code> argument. Otherwise, the order defaults to the order they appear in the dataset. For our <code>demo</code> dataset, we will tell R that the <code>factor</code> variable is a factor by using <code>col_factor()</code> and we can also specify the order of the levels so that they don’t just appear alphabetically. Additionally, we can also specify exactly what format our <code>date</code> variable is in using <code>%Y-%m-%d</code>.</p>
<p>We then save this column specification to an object, and then add this to the <code>col_types</code> argument when we call <code>read_csv()</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>corrected_cols <span class="ot">&lt;-</span> <span class="fu">cols</span>(</span>
<span id="cb26-2"><a href="#cb26-2"></a>  <span class="at">character =</span> <span class="fu">col_character</span>(),</span>
<span id="cb26-3"><a href="#cb26-3"></a>  <span class="at">factor =</span> <span class="fu">col_factor</span>(<span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"low"</span>, <span class="st">"med"</span>, <span class="st">"high"</span>)),</span>
<span id="cb26-4"><a href="#cb26-4"></a>  <span class="at">integer =</span> <span class="fu">col_integer</span>(),</span>
<span id="cb26-5"><a href="#cb26-5"></a>  <span class="at">double =</span> <span class="fu">col_double</span>(),</span>
<span id="cb26-6"><a href="#cb26-6"></a>  <span class="at">logical =</span> <span class="fu">col_logical</span>(),</span>
<span id="cb26-7"><a href="#cb26-7"></a>  <span class="at">date =</span> <span class="fu">col_date</span>(<span class="at">format =</span> <span class="st">"%Y-%m-%d"</span>)</span>
<span id="cb26-8"><a href="#cb26-8"></a>)</span>
<span id="cb26-9"><a href="#cb26-9"></a></span>
<span id="cb26-10"><a href="#cb26-10"></a>demo <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"data/demo.csv"</span>, <span class="at">col_types =</span> corrected_cols)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>For dates, you might need to set the format your dates are in. See <code><a href="https://rdrr.io/r/base/strptime.html">?strptime</a></code> for a list of the codes used to represent different date formats. For example, <code>"%d-%b-%y"</code> means that the dates are formatted like <code>31-Jan-21</code>.</p>
</div>
</div>
<p>The functions from <pkg>readxl</pkg> for loading <code>.xlsx</code> sheets have a different, more limited way to specify the column types. You will have to convert factor columns and dates using <code>mutate()</code>, which you’ll learn about in <a href="09-wrangle.html" class="quarto-xref"><span>Chapter 9</span></a>, so most people let <code>read_excel()</code> guess data types and don’t set the <code>col_types</code> argument.</p>
<p>For SPSS data, whilst <code>rio::import()</code> will just read the numeric values of factors and not their labels, the function <code>read_sav()</code> from <pkg>haven</pkg> reads both. However, you have to convert factors from a haven-specific “labelled double” to a factor (we have no idea why haven doesn’t do this for you).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>demo_sav<span class="sc">$</span>factor <span class="ot">&lt;-</span> haven<span class="sc">::</span><span class="fu">as_factor</span>(demo_sav<span class="sc">$</span>factor)</span>
<span id="cb27-2"><a href="#cb27-2"></a></span>
<span id="cb27-3"><a href="#cb27-3"></a><span class="fu">glimpse</span>(demo_sav)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 6
Columns: 6
$ character &lt;chr&gt; "A", "B", "C", "D", "E", "F"
$ factor    &lt;fct&gt; high, low, med, high, low, med
$ integer   &lt;dbl&gt; 1, 2, 3, 4, 5, 6
$ double    &lt;dbl&gt; 1.5, 2.5, 3.5, 4.5, 5.5, 6.5
$ logical   &lt;dbl&gt; 1, 1, 0, 0, NA, 1
$ date      &lt;date&gt; 2024-04-23, 2024-04-22, 2024-04-21, 2024-04-20, 2024-04-19, …</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The way you specify column types for <pkg>googlesheets4</pkg> is a little different from <pkg>readr</pkg>, although you can also use the shortcodes described in the help for <code>read_sheet()</code> with <pkg>readr</pkg> functions. There is currently no column specification for factors.</p>
</div>
</div>
</section></section><section id="creating-data" class="level2" data-number="G.5"><h2 data-number="G.5" class="anchored" data-anchor-id="creating-data">
<span class="header-section-number">G.5</span> Creating data</h2>
<p>If you need to create a small data table from scratch in R, use the <code><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble::tibble()</a></code> function, and type the data right in. The <code>tibble</code> package is part of the <a href="https://psyteachr.github.io/glossary/t#tidyverse" target="_blank" class="glossary" title="A set of R packages that help you create and work with tidy data">tidyverse</a> package that we loaded at the start of this chapter.</p>
<p>Let’s create a small table with the names of three <a href="https://en.wikipedia.org/wiki/Avatar:_The_Last_Airbender">Avatar</a> characters and their bending type. The <code>tibble()</code> function takes <a href="https://psyteachr.github.io/glossary/a#argument" target="_blank" class="glossary" title="A variable that provides input to a function.">arguments</a> with the names that you want your columns to have. The values are <a href="https://psyteachr.github.io/glossary/v#vector" target="_blank" class="glossary" title="A type of data structure that collects values with the same data type, like T/F values, numbers, or strings.">vectors</a> that list the column values in order.</p>
<p>If you don’t know the value for one of the cells, you can enter <a href="https://psyteachr.github.io/glossary/n#na" target="_blank" class="glossary" title="A missing value that is “Not Available”">NA</a>, which we have to do for Sokka because he doesn’t have any bending ability. If all the values in the column are the same, you can just enter one value and it will be copied for each row.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>avatar <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb29-2"><a href="#cb29-2"></a>  <span class="at">name =</span> <span class="fu">c</span>(<span class="st">"Katara"</span>, <span class="st">"Toph"</span>, <span class="st">"Sokka"</span>),</span>
<span id="cb29-3"><a href="#cb29-3"></a>  <span class="at">bends =</span> <span class="fu">c</span>(<span class="st">"water"</span>, <span class="st">"earth"</span>, <span class="cn">NA</span>),</span>
<span id="cb29-4"><a href="#cb29-4"></a>  <span class="at">friendly =</span> <span class="cn">TRUE</span></span>
<span id="cb29-5"><a href="#cb29-5"></a>)</span>
<span id="cb29-6"><a href="#cb29-6"></a></span>
<span id="cb29-7"><a href="#cb29-7"></a><span class="co"># print it</span></span>
<span id="cb29-8"><a href="#cb29-8"></a>avatar</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">name</th>
<th style="text-align: left;">bends</th>
<th style="text-align: left;">friendly</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Katara</td>
<td style="text-align: left;">water</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="even">
<td style="text-align: left;">Toph</td>
<td style="text-align: left;">earth</td>
<td style="text-align: left;">TRUE</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Sokka</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">TRUE</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>You can also use the <code><a href="https://tibble.tidyverse.org/reference/tribble.html">tibble::tribble()</a></code> function to create a table by row, rather than by column. You start by listing the column names, each preceded by a tilde (<code>~</code>), then you list the values for each column, row by row, separated by commas (don’t forget a comma at the end of each row).</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>avatar_by_row <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb30-2"><a href="#cb30-2"></a>  <span class="sc">~</span>name,    <span class="sc">~</span>bends,  <span class="sc">~</span>friendly,</span>
<span id="cb30-3"><a href="#cb30-3"></a>  <span class="st">"Katara"</span>, <span class="st">"water"</span>, <span class="cn">TRUE</span>,</span>
<span id="cb30-4"><a href="#cb30-4"></a>  <span class="st">"Toph"</span>,   <span class="st">"earth"</span>, <span class="cn">TRUE</span>,</span>
<span id="cb30-5"><a href="#cb30-5"></a>  <span class="st">"Sokka"</span>,  <span class="cn">NA</span>,      <span class="cn">TRUE</span></span>
<span id="cb30-6"><a href="#cb30-6"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You don’t have to line up the columns in a tribble, but it can make it easier to spot errors.</p>
</div>
</div>
<p>You may not need to do this very often if you are primarily working with data that you import from spreadsheets, but it is useful to know how to do it anyway.</p>
</section><section id="writing-data" class="level2" data-number="G.6"><h2 data-number="G.6" class="anchored" data-anchor-id="writing-data">
<span class="header-section-number">G.6</span> Writing data</h2>
<p>If you have data that you want to save, use <code>rio::export()</code>, as follows.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="fu">export</span>(avatar, <span class="st">"data/avatar.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This will save the data in CSV format to your working directory.</p>
<p>Writing to Google Sheets is a little trickier (if you never use Google Sheets feel free to skip this section). Even if a Google Sheet is publicly editable, you can’t add data to it without authorising your account.</p>
<p>You can authorise interactively using the following code (and your own email), which will prompt you to authorise “Tidyverse API Packages” the first time you do this. If you don’t tick the checkbox authorising it to “See, edit, create, and delete all your Google Sheets spreadsheets”, the next steps will fail.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="co"># authorise your account </span></span>
<span id="cb32-2"><a href="#cb32-2"></a><span class="co"># this only needs to be done once per script</span></span>
<span id="cb32-3"><a href="#cb32-3"></a><span class="fu">gs4_auth</span>(<span class="at">email =</span> <span class="st">"myemail@gmail.com"</span>)</span>
<span id="cb32-4"><a href="#cb32-4"></a></span>
<span id="cb32-5"><a href="#cb32-5"></a><span class="co"># create a new sheet</span></span>
<span id="cb32-6"><a href="#cb32-6"></a>sheet_id <span class="ot">&lt;-</span> <span class="fu">gs4_create</span>(<span class="at">name =</span> <span class="st">"demo-file"</span>, </span>
<span id="cb32-7"><a href="#cb32-7"></a>                       <span class="at">sheets =</span> <span class="st">"letters"</span>)</span>
<span id="cb32-8"><a href="#cb32-8"></a></span>
<span id="cb32-9"><a href="#cb32-9"></a><span class="co"># define the data table to save</span></span>
<span id="cb32-10"><a href="#cb32-10"></a>letter_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb32-11"><a href="#cb32-11"></a>  <span class="at">character =</span> LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>],</span>
<span id="cb32-12"><a href="#cb32-12"></a>  <span class="at">integer =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb32-13"><a href="#cb32-13"></a>  <span class="at">double =</span> <span class="fu">c</span>(<span class="fl">1.1</span>, <span class="fl">2.2</span>, <span class="fl">3.3</span>, <span class="fl">4.4</span>, <span class="fl">5.5</span>),</span>
<span id="cb32-14"><a href="#cb32-14"></a>  <span class="at">logical =</span> <span class="fu">c</span>(T, F, T, F, T),</span>
<span id="cb32-15"><a href="#cb32-15"></a>  <span class="at">date =</span> lubridate<span class="sc">::</span><span class="fu">today</span>()</span>
<span id="cb32-16"><a href="#cb32-16"></a>)</span>
<span id="cb32-17"><a href="#cb32-17"></a></span>
<span id="cb32-18"><a href="#cb32-18"></a><span class="fu">write_sheet</span>(<span class="at">data =</span> letter_data, </span>
<span id="cb32-19"><a href="#cb32-19"></a>            <span class="at">ss =</span> sheet_id, </span>
<span id="cb32-20"><a href="#cb32-20"></a>            <span class="at">sheet =</span> <span class="st">"letters"</span>)</span>
<span id="cb32-21"><a href="#cb32-21"></a></span>
<span id="cb32-22"><a href="#cb32-22"></a><span class="do">## append some data</span></span>
<span id="cb32-23"><a href="#cb32-23"></a>new_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb32-24"><a href="#cb32-24"></a>  <span class="at">character =</span> <span class="st">"F"</span>,</span>
<span id="cb32-25"><a href="#cb32-25"></a>  <span class="at">integer =</span> <span class="dv">6</span>L,</span>
<span id="cb32-26"><a href="#cb32-26"></a>  <span class="at">double =</span> <span class="fl">6.6</span>,</span>
<span id="cb32-27"><a href="#cb32-27"></a>  <span class="at">logical =</span> <span class="cn">FALSE</span>,</span>
<span id="cb32-28"><a href="#cb32-28"></a>  <span class="at">date =</span> lubridate<span class="sc">::</span><span class="fu">today</span>()</span>
<span id="cb32-29"><a href="#cb32-29"></a>)</span>
<span id="cb32-30"><a href="#cb32-30"></a><span class="fu">sheet_append</span>(<span class="at">data =</span> new_data,</span>
<span id="cb32-31"><a href="#cb32-31"></a>             <span class="at">ss =</span> sheet_id,</span>
<span id="cb32-32"><a href="#cb32-32"></a>             <span class="at">sheet =</span> <span class="st">"letters"</span>)</span>
<span id="cb32-33"><a href="#cb32-33"></a></span>
<span id="cb32-34"><a href="#cb32-34"></a><span class="co"># read the data</span></span>
<span id="cb32-35"><a href="#cb32-35"></a>demo <span class="ot">&lt;-</span> <span class="fu">read_sheet</span>(<span class="at">ss =</span> sheet_id, <span class="at">sheet =</span> <span class="st">"letters"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="try callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Create a new table called <code>family</code> with the first name, last name, and age of your family members (biological, adopted, or chosen).</li>
<li>Save it to a CSV file called “family.csv”.</li>
<li>Clear the object from your environment by restarting R or with the code <code>remove(family)</code>.</li>
<li>Load the data back in and view it.</li>
</ul>
<div class="cell" data-layout-align="center" data-webex.hide="Solution">
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a><span class="co"># create the table</span></span>
<span id="cb33-2"><a href="#cb33-2"></a>family <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb33-3"><a href="#cb33-3"></a>  <span class="sc">~</span>first_name, <span class="sc">~</span>last_name, <span class="sc">~</span>age,</span>
<span id="cb33-4"><a href="#cb33-4"></a>  <span class="st">"Lisa"</span>, <span class="st">"DeBruine"</span>, <span class="dv">45</span>,</span>
<span id="cb33-5"><a href="#cb33-5"></a>  <span class="st">"Robbie"</span>, <span class="st">"Jones"</span>, <span class="dv">14</span></span>
<span id="cb33-6"><a href="#cb33-6"></a>)</span>
<span id="cb33-7"><a href="#cb33-7"></a></span>
<span id="cb33-8"><a href="#cb33-8"></a><span class="co"># save the data to CSV</span></span>
<span id="cb33-9"><a href="#cb33-9"></a><span class="fu">export</span>(family, <span class="st">"data/family.csv"</span>)</span>
<span id="cb33-10"><a href="#cb33-10"></a></span>
<span id="cb33-11"><a href="#cb33-11"></a><span class="co"># remove the object from the environment</span></span>
<span id="cb33-12"><a href="#cb33-12"></a><span class="fu">remove</span>(family)</span>
<span id="cb33-13"><a href="#cb33-13"></a></span>
<span id="cb33-14"><a href="#cb33-14"></a><span class="co"># load the data</span></span>
<span id="cb33-15"><a href="#cb33-15"></a>family <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"data/family.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>We’ll be working with <a href="https://psyteachr.github.io/glossary/t#tabular-data" target="_blank" class="glossary" title="Data in a rectangular table format, where each row has an entry for each column.">tabular data</a> a lot in this class, but tabular data is made up of <a href="https://psyteachr.github.io/glossary/v#vector" target="_blank" class="glossary" title="A type of data structure that collects values with the same data type, like T/F values, numbers, or strings.">vectors</a>, which groups together data with the same basic <a href="https://psyteachr.github.io/glossary/d#data-type" target="_blank" class="glossary" title="The kind of data represented by an object.">data type</a>. <a href="app-datatypes.html" class="quarto-xref"><span>Appendix H</span></a> explains some of this terminology to help you understand the functions we’ll be learning to process and analyse data.</p>
</section><section id="troubleshooting" class="level2" data-number="G.7"><h2 data-number="G.7" class="anchored" data-anchor-id="troubleshooting">
<span class="header-section-number">G.7</span> Troubleshooting</h2>
<p>What if you import some data and it guesses the wrong column type? The most common reason is that a numeric column has some non-numbers in it somewhere. Maybe someone wrote a note in an otherwise numeric column. Columns have to be all one data type, so if there are any characters, the whole column is converted to character strings, and numbers like <code>1.2</code> get represented as <code>"1.2"</code>, which will cause very weird errors like <code>"100" &lt; "9" == TRUE</code>. You can catch this by using <code>glimpse()</code> to check your data.</p>
<p>The data directory you downloaded contains a file called “mess.csv”. Let’s try loading this dataset.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a>mess <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"data/mess.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (input = "", file = NULL, text = NULL, cmd = NULL, :
Stopped early on line 5. Expected 7 fields but found 0. Consider fill=TRUE and
comment.char=. First discarded non-empty line: &lt;&lt;junk,missing,0.72,b,1,2 -
3,2020-01-2&gt;&gt;</code></pre>
</div>
</div>
<p>When importing goes wrong, it’s often easier to fix it using the specific importing function for that file type (e.g., use <code>read_csv()</code> rather than <code>rio::import()</code>. This is because the problems tend to be specific to the file format and you can look up the help for these functions more easily. For CSV files, the import function is <code><a href="https://readr.tidyverse.org/reference/read_delim.html">readr::read_csv</a></code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="co"># lazy = FALSE loads the data right away so you can see error messages</span></span>
<span id="cb36-2"><a href="#cb36-2"></a><span class="co"># this default changed in late 2021 and might change back soon</span></span>
<span id="cb36-3"><a href="#cb36-3"></a>mess <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/mess.csv"</span>, <span class="at">lazy =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 27 Columns: 1
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (1): This is my messy dataset

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>You’ll get a warning about parsing issues and the data table is just a single column. View the file <code>data/mess.csv</code> by clicking on it in the File pane, and choosing “View File”. Here are the first 10 lines. What went wrong?</p>
<div class="kable-table">
<table class="caption-top table">
<thead><tr class="header">
<th style="text-align: left;">This is my messy dataset</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">junk,order,score,letter,good,min_max,date</td>
</tr>
<tr class="even">
<td style="text-align: left;">junk,1,-1,a,1,1 - 2,2020-01-1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">junk,missing,0.72,b,1,2 - 3,2020-01-2</td>
</tr>
<tr class="even">
<td style="text-align: left;">junk,3,-0.62,c,FALSE,3 - 4,2020-01-3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">junk,4,2.03,d,T,4 - 5,2020-01-4</td>
</tr>
<tr class="even">
<td style="text-align: left;">junk,5,NA,e,1,5 - 6,2020-01-5</td>
</tr>
</tbody>
</table>
</div>
<p>First, the file starts with a note: “This is my messy dataset” and then a blank line. The first line of data should be the column headings, so we want to skip the first two lines. You can do this with the argument <code>skip</code> in <code>read_csv()</code>.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a>mess <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/mess.csv"</span>, </span>
<span id="cb39-2"><a href="#cb39-2"></a>                 <span class="at">skip =</span> <span class="dv">2</span>,</span>
<span id="cb39-3"><a href="#cb39-3"></a>                 <span class="at">lazy =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 26 Columns: 7
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (6): junk, order, letter, good, min_max, date
dbl (1): score

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a><span class="fu">glimpse</span>(mess)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 26
Columns: 7
$ junk    &lt;chr&gt; "junk", "junk", "junk", "junk", "junk", "junk", "junk", "junk"…
$ order   &lt;chr&gt; "1", "missing", "3", "4", "5", "6", "7", "8", "9", "10", "11",…
$ score   &lt;dbl&gt; -1.00, 0.72, -0.62, 2.03, NA, 0.99, 0.03, 0.67, 0.57, 0.90, -1…
$ letter  &lt;chr&gt; "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m…
$ good    &lt;chr&gt; "1", "1", "FALSE", "T", "1", "0", "T", "TRUE", "1", "T", "F", …
$ min_max &lt;chr&gt; "1 - 2", "2 - 3", "3 - 4", "4 - 5", "5 - 6", "6 - 7", "7 - 8",…
$ date    &lt;chr&gt; "2020-01-1", "2020-01-2", "2020-01-3", "2020-01-4", "2020-01-5…</code></pre>
</div>
</div>
<p>OK, that’s a little better, but this table is still a serious mess in several ways:</p>
<ul>
<li>
<code>junk</code> is a column that we don’t need</li>
<li>
<code>order</code> should be an integer column</li>
<li>
<code>good</code> should be a logical column</li>
<li>
<code>good</code> uses all kinds of different ways to record TRUE and FALSE values</li>
<li>
<code>min_max</code> contains two pieces of numeric information, but is a character column</li>
<li>
<code>date</code> should be a date column</li>
</ul>
<p>We’ll learn how to deal with this mess in <a href="08-tidy.html" class="quarto-xref"><span>Chapter 8</span></a> and <a href="09-wrangle.html" class="quarto-xref"><span>Chapter 9</span></a>, but we can fix a few things by setting the <code>col_types</code> argument in <code>read_csv()</code> to specify the column types for our two columns that were guessed wrong and skip the “junk” column. The argument <code>col_types</code> takes a list where the name of each item in the list is a column name and the value is from the table below. You can use the function, like <code>col_double()</code> or the abbreviation, like <code>"d"</code>; for consistency with earlier in this chapter we will use the function names. Omitted column names are guessed.</p>
<table class="caption-top table">
<thead><tr class="header">
<th style="text-align: left;">function</th>
<th style="text-align: left;"></th>
<th style="text-align: left;">abbreviation</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">col_logical()</td>
<td style="text-align: left;">l</td>
<td style="text-align: left;">logical values</td>
</tr>
<tr class="even">
<td style="text-align: left;">col_integer()</td>
<td style="text-align: left;">i</td>
<td style="text-align: left;">integer values</td>
</tr>
<tr class="odd">
<td style="text-align: left;">col_double()</td>
<td style="text-align: left;">d</td>
<td style="text-align: left;">numeric values</td>
</tr>
<tr class="even">
<td style="text-align: left;">col_character()</td>
<td style="text-align: left;">c</td>
<td style="text-align: left;">strings</td>
</tr>
<tr class="odd">
<td style="text-align: left;">col_factor(levels, ordered)</td>
<td style="text-align: left;">f</td>
<td style="text-align: left;">a fixed set of values</td>
</tr>
<tr class="even">
<td style="text-align: left;">col_date(format = ““)</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">with the locale’s date_format</td>
</tr>
<tr class="odd">
<td style="text-align: left;">col_time(format = ““)</td>
<td style="text-align: left;">t</td>
<td style="text-align: left;">with the locale’s time_format</td>
</tr>
<tr class="even">
<td style="text-align: left;">col_datetime(format = ““)</td>
<td style="text-align: left;">T</td>
<td style="text-align: left;">ISO8601 date time</td>
</tr>
<tr class="odd">
<td style="text-align: left;">col_number()</td>
<td style="text-align: left;">n</td>
<td style="text-align: left;">numbers containing the grouping_mark</td>
</tr>
<tr class="even">
<td style="text-align: left;">col_skip()</td>
<td style="text-align: left;">_, -</td>
<td style="text-align: left;">don’t import this column</td>
</tr>
<tr class="odd">
<td style="text-align: left;">col_guess()</td>
<td style="text-align: left;">?</td>
<td style="text-align: left;">parse using the “best” type based on the input</td>
</tr>
</tbody>
</table>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a><span class="co"># omitted values are guessed</span></span>
<span id="cb43-2"><a href="#cb43-2"></a><span class="co"># ?col_date for format options</span></span>
<span id="cb43-3"><a href="#cb43-3"></a>ct <span class="ot">&lt;-</span> <span class="fu">cols</span>(</span>
<span id="cb43-4"><a href="#cb43-4"></a>  <span class="at">junk =</span> <span class="fu">col_skip</span>(), <span class="co"># skip this column</span></span>
<span id="cb43-5"><a href="#cb43-5"></a>  <span class="at">order =</span> <span class="fu">col_integer</span>(),</span>
<span id="cb43-6"><a href="#cb43-6"></a>  <span class="at">good =</span> <span class="fu">col_logical</span>(),</span>
<span id="cb43-7"><a href="#cb43-7"></a>  <span class="at">date =</span> <span class="fu">col_date</span>(<span class="at">format =</span> <span class="st">"%Y-%m-%d"</span>)</span>
<span id="cb43-8"><a href="#cb43-8"></a>)</span>
<span id="cb43-9"><a href="#cb43-9"></a></span>
<span id="cb43-10"><a href="#cb43-10"></a>tidier <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/mess.csv"</span>, </span>
<span id="cb43-11"><a href="#cb43-11"></a>                   <span class="at">skip =</span> <span class="dv">2</span>,</span>
<span id="cb43-12"><a href="#cb43-12"></a>                   <span class="at">col_types =</span> ct,</span>
<span id="cb43-13"><a href="#cb43-13"></a>                   <span class="at">lazy =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
</div>
<p>You will get a message about parsing issues when you run this that tells you to run the <code>problems()</code> function to see a table of the problems. Warnings look scary at first, but always start by reading the message.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a><span class="fu">problems</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: right;">row</th>
<th style="text-align: right;">col</th>
<th style="text-align: left;">expected</th>
<th style="text-align: left;">actual</th>
<th style="text-align: left;">file</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">an integer</td>
<td style="text-align: left;">missing</td>
<td style="text-align: left;">data/mess.csv</td>
</tr></tbody>
</table>
</div>
</div>
</div>
<p>The output of <code>problems()</code> tells you what row (3) and column (2) the error was found in, what kind of data was expected (an integer), and what the actual value was (missing). If you specifically tell <code>read_csv()</code> to import a column as an integer, any characters (i.e., not numbers) in the column will produce a warning like this and then be recorded as <code>NA</code>. You can manually set what missing values are recorded as with the <code>na</code> argument.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a>tidiest <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/mess.csv"</span>, </span>
<span id="cb46-2"><a href="#cb46-2"></a>                   <span class="at">skip =</span> <span class="dv">2</span>,</span>
<span id="cb46-3"><a href="#cb46-3"></a>                   <span class="at">na =</span> <span class="st">"missing"</span>,</span>
<span id="cb46-4"><a href="#cb46-4"></a>                   <span class="at">col_types =</span> ct,</span>
<span id="cb46-5"><a href="#cb46-5"></a>                   <span class="at">lazy =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now <code>order</code> is an integer variable where any empty cells contain <code>NA</code>. The variable <code>good</code> is a logical value, where <code>0</code> and <code>F</code> are converted to <code>FALSE</code>, while <code>1</code> and <code>T</code> are converted to <code>TRUE</code>. The variable <code>date</code> is a date type (adding leading zeros to the day). We’ll learn in later chapters how to fix other problems, such as the <code>min_max</code> column containing two different types of data.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: right;">order</th>
<th style="text-align: left;">score</th>
<th style="text-align: left;">letter</th>
<th style="text-align: left;">good</th>
<th style="text-align: left;">min_max</th>
<th style="text-align: left;">date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">-1</td>
<td style="text-align: left;">a</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">1 - 2</td>
<td style="text-align: left;">2020-01-01</td>
</tr>
<tr class="even">
<td style="text-align: right;">NA</td>
<td style="text-align: left;">0.72</td>
<td style="text-align: left;">b</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">2 - 3</td>
<td style="text-align: left;">2020-01-02</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">-0.62</td>
<td style="text-align: left;">c</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">3 - 4</td>
<td style="text-align: left;">2020-01-03</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">2.03</td>
<td style="text-align: left;">d</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">4 - 5</td>
<td style="text-align: left;">2020-01-04</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">e</td>
<td style="text-align: left;">TRUE</td>
<td style="text-align: left;">5 - 6</td>
<td style="text-align: left;">2020-01-05</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: left;">0.99</td>
<td style="text-align: left;">f</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: left;">6 - 7</td>
<td style="text-align: left;">2020-01-06</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section><section id="working-with-real-data" class="level2" data-number="G.8"><h2 data-number="G.8" class="anchored" data-anchor-id="working-with-real-data">
<span class="header-section-number">G.8</span> Working with real data</h2>
<p>It’s worth highlighting at this point that working with real data can be difficult because each dataset can be messy in its own way. Throughout this course we will show you common errors and how to fix them, but be prepared that when you start with working your own data, you’ll likely come across problems we don’t cover in the course and that’s just part of joy of learning programming. You’ll also get better at looking up solutions using sites like <a href="https://stackoverflow.com/">Stack Overflow</a> and there’s a fantastic <a href="https://twitter.com/hashtag/rstats">#rstats</a> community on Twitter you can ask for help.</p>
<p>You may also be tempted to fix messy datasets by, for example, opening up Excel and editing them there. Whilst this might seem easier in the short term, there’s two serious issues with doing this. First, you will likely work with datasets that have recurring messy problems. By taking the time to solve these problems with code, you can apply the same solutions to a large number of future datasets so it’s more efficient in the long run. Second, if you edit the spreadsheet, there’s no record of what you did. By solving these problems with code, you do so reproducibly and you don’t edit the original data file. This means that if you make an error, you haven’t lost the original data and can recover.</p>
</section><section id="exercises" class="level2" data-number="G.9"><h2 data-number="G.9" class="anchored" data-anchor-id="exercises">
<span class="header-section-number">G.9</span> Exercises</h2>
<p>For the final step in this chapter, we will create a report using one of the in-built datasets to practice the skills you have used so far. You may need to refer back to previous chapters to help you complete these exercises and you may also want to take a break before you work through this section. We’d also recommend you knit at every step so that you can see how your output changes.</p>
<section id="sec-exercises-new-rmd-4" class="level3" data-number="G.9.1"><h3 data-number="G.9.1" class="anchored" data-anchor-id="sec-exercises-new-rmd-4">
<span class="header-section-number">G.9.1</span> New Markdown</h3>
<p>Create and save a new R Markdown document named <code>starwars_report.Rmd</code>. In the set-up code chunk load the packages <code>tidyverse</code> and <code>rio</code>.</p>
<p>We’re going to use the built-in <code>starwars</code> dataset that contains data about Star Wars characters. You can learn more about the dataset by using the <code><a href="https://rdrr.io/r/utils/help.html">?help</a></code> function.</p>
</section><section id="sec-exercises-load" class="level3" data-number="G.9.2"><h3 data-number="G.9.2" class="anchored" data-anchor-id="sec-exercises-load">
<span class="header-section-number">G.9.2</span> Import and export the dataset</h3>
<ul>
<li>First, load the in-built dataset into the environment. Type and run the code to do this in the console; do not save it in your Markdown.<br>
</li>
<li>Then, export the dataset to a .csv file and save it in your <code>data</code> directory. Again, do this in the console.</li>
<li>Finally, import this version of the dataset using <code>read_csv()</code> to an object named <code>starwars</code> - you can put this code in your Markdown.</li>
</ul>
<div class="webex-solution">
<button>
Solution
</button>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1"></a><span class="fu">data</span>(starwars)</span>
<span id="cb47-2"><a href="#cb47-2"></a><span class="fu">export</span>(starwars, <span class="st">"data/starwars.csv"</span>)</span>
<span id="cb47-3"><a href="#cb47-3"></a>starwars <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/starwars.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 87 Columns: 14
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (11): name, hair_color, skin_color, eye_color, sex, gender, homeworld, s...
dbl  (3): height, mass, birth_year

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
</div>
</section><section id="convert-column-types" class="level3" data-number="G.9.3"><h3 data-number="G.9.3" class="anchored" data-anchor-id="convert-column-types">
<span class="header-section-number">G.9.3</span> Convert column types</h3>
<ul>
<li>Check the column specification of <code>starwars</code>.</li>
<li>Create a new column specification that lists the following columns as factors: <code>hair_color</code>, <code>skin_color</code>, <code>eye_color</code>, <code>sex</code>, <code>gender</code>, <code>homeworld</code>, and <code>species</code> and skips the following columns: <code>films</code>, <code>vehicles</code>, and <code>starships</code> (this is because these columns contain multiple values and are stored as lists, which we haven’t covered how to work with). You do not have to set the factor orders (although you can if you wish).</li>
<li>Re-import the dataset, this time with the corrected column types.</li>
</ul>
<div class="webex-solution">
<button>
Solution
</button>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1"></a><span class="fu">spec</span>(starwars)</span>
<span id="cb49-2"><a href="#cb49-2"></a>corrected_cols <span class="ot">&lt;-</span> <span class="fu">cols</span>(</span>
<span id="cb49-3"><a href="#cb49-3"></a>  <span class="at">name =</span> <span class="fu">col_character</span>(),</span>
<span id="cb49-4"><a href="#cb49-4"></a>  <span class="at">height =</span> <span class="fu">col_double</span>(),</span>
<span id="cb49-5"><a href="#cb49-5"></a>  <span class="at">mass =</span> <span class="fu">col_double</span>(),</span>
<span id="cb49-6"><a href="#cb49-6"></a>  <span class="at">hair_color =</span> <span class="fu">col_factor</span>(),</span>
<span id="cb49-7"><a href="#cb49-7"></a>  <span class="at">skin_color =</span> <span class="fu">col_factor</span>(),</span>
<span id="cb49-8"><a href="#cb49-8"></a>  <span class="at">eye_color =</span> <span class="fu">col_factor</span>(),</span>
<span id="cb49-9"><a href="#cb49-9"></a>  <span class="at">birth_year =</span> <span class="fu">col_double</span>(),</span>
<span id="cb49-10"><a href="#cb49-10"></a>  <span class="at">sex =</span> <span class="fu">col_factor</span>(),</span>
<span id="cb49-11"><a href="#cb49-11"></a>  <span class="at">gender =</span> <span class="fu">col_factor</span>(),</span>
<span id="cb49-12"><a href="#cb49-12"></a>  <span class="at">homeworld =</span> <span class="fu">col_factor</span>(),</span>
<span id="cb49-13"><a href="#cb49-13"></a>  <span class="at">species =</span> <span class="fu">col_factor</span>(),</span>
<span id="cb49-14"><a href="#cb49-14"></a>  <span class="at">films =</span> <span class="fu">col_skip</span>(),</span>
<span id="cb49-15"><a href="#cb49-15"></a>  <span class="at">vehicles =</span> <span class="fu">col_skip</span>(),</span>
<span id="cb49-16"><a href="#cb49-16"></a>  <span class="at">starships =</span> <span class="fu">col_skip</span>()</span>
<span id="cb49-17"><a href="#cb49-17"></a>)</span>
<span id="cb49-18"><a href="#cb49-18"></a></span>
<span id="cb49-19"><a href="#cb49-19"></a>starwars <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/starwars.csv"</span>, <span class="at">col_types =</span> corrected_cols)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>cols(
  name = col_character(),
  height = col_double(),
  mass = col_double(),
  hair_color = col_character(),
  skin_color = col_character(),
  eye_color = col_character(),
  birth_year = col_double(),
  sex = col_character(),
  gender = col_character(),
  homeworld = col_character(),
  species = col_character(),
  films = col_character(),
  vehicles = col_character(),
  starships = col_character()
)</code></pre>
</div>
</div>
</div>
</section><section id="sec-exercises-plots" class="level3" data-number="G.9.4"><h3 data-number="G.9.4" class="anchored" data-anchor-id="sec-exercises-plots">
<span class="header-section-number">G.9.4</span> Plots</h3>
<p>Produce the following plots and one plot of your own choosing. Write a brief summary of what each plot shows and any conclusions you might reach from the data.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="app-import_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="app-import_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="app-import_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a><span class="fu">ggplot</span>(starwars, <span class="fu">aes</span>(height)) <span class="sc">+</span></span>
<span id="cb51-2"><a href="#cb51-2"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">25</span>, <span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> .<span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb51-3"><a href="#cb51-3"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">50</span>, <span class="at">to =</span> <span class="dv">300</span>, <span class="at">by =</span> <span class="dv">25</span>)) <span class="sc">+</span></span>
<span id="cb51-4"><a href="#cb51-4"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Height (cm) distribution of Star Wars Characters"</span>) <span class="sc">+</span></span>
<span id="cb51-5"><a href="#cb51-5"></a>  <span class="fu">theme_classic</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a><span class="fu">ggplot</span>(starwars, <span class="fu">aes</span>(height, mass)) <span class="sc">+</span></span>
<span id="cb52-2"><a href="#cb52-2"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb52-3"><a href="#cb52-3"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Mass (kg) by height (cm) distribution of Star Wars Characters"</span>) <span class="sc">+</span></span>
<span id="cb52-4"><a href="#cb52-4"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb52-5"><a href="#cb52-5"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">300</span>, <span class="at">by =</span> <span class="dv">50</span>)) <span class="sc">+</span></span>
<span id="cb52-6"><a href="#cb52-6"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">2000</span>, <span class="at">by =</span> <span class="dv">100</span>)) <span class="sc">+</span></span>
<span id="cb52-7"><a href="#cb52-7"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">300</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a><span class="fu">ggplot</span>(starwars, <span class="fu">aes</span>(<span class="at">x =</span> gender, <span class="at">fill =</span> gender)) <span class="sc">+</span></span>
<span id="cb53-2"><a href="#cb53-2"></a>  <span class="fu">geom_bar</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">colour =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb53-3"><a href="#cb53-3"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">name =</span> <span class="st">"Gender of character"</span>, <span class="at">labels =</span> (<span class="fu">c</span>(<span class="st">"Masculine"</span>, <span class="st">"Feminine"</span>, <span class="st">"Missing"</span>))) <span class="sc">+</span></span>
<span id="cb53-4"><a href="#cb53-4"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb53-5"><a href="#cb53-5"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Number of Star Wars characters of each gender"</span>) <span class="sc">+</span></span>
<span id="cb53-6"><a href="#cb53-6"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section><section id="make-it-look-nice" class="level3" data-number="G.9.5"><h3 data-number="G.9.5" class="anchored" data-anchor-id="make-it-look-nice">
<span class="header-section-number">G.9.5</span> Make it look nice</h3>
<ul>
<li>Add at least one Star Wars related image from an online source</li>
<li>Hide the code and any messages from the knitted output</li>
<li>Resize any images as you see fit</li>
</ul>
<div class="webex-solution">
<button>
Solution
</button>
<div class="cell" data-layout-align="center" data-verbatim="r, echo = FALSE, out.width = &quot;50%&quot;, fig.cap=&quot;Adaptation of Star Wars logo created by Weweje; original logo by Suzy Rice, 1976. CC-BY-3.0&quot;">
<div class="verbatim">
<pre class="sourceCode r code-with-copy"><code class="sourceCode R">```{r, echo = FALSE, out.width = "50%", fig.cap="Adaptation of Star Wars logo created by Weweje; original logo by Suzy Rice, 1976. CC-BY-3.0"}</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"https://upload.wikimedia.org/wikipedia/commons/thumb/c/ce/Star_wars2.svg/2880px-Star_wars2.svg.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre class="sourceCode r code-with-copy"><code class="sourceCode R">```</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/ce/Star_wars2.svg/2880px-Star_wars2.svg.png" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>Adaptation of Star Wars logo created by Weweje; original logo by Suzy Rice, 1976. CC-BY-3.0</figcaption></figure>
</div>
</div>
</div>
</div>
</section></section><section id="sec-glossary-data" class="level2" data-number="G.10"><h2 data-number="G.10" class="anchored" data-anchor-id="sec-glossary-data">
<span class="header-section-number">G.10</span> Glossary</h2>
<div class="cell" data-layout-align="center">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: left;">definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/a#argument" class="glossary" target="_blank">argument</a></td>
<td style="text-align: left;">A variable that provides input to a function.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/c#character" class="glossary" target="_blank">character</a></td>
<td style="text-align: left;">A data type representing strings of text.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/c#console" class="glossary" target="_blank">console</a></td>
<td style="text-align: left;">The pane in RStudio where you can type in commands and view output messages.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/d#data-type" class="glossary" target="_blank">data-type</a></td>
<td style="text-align: left;">The kind of data represented by an object.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/d#double" class="glossary" target="_blank">double</a></td>
<td style="text-align: left;">A data type representing a real decimal number</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/e#extension" class="glossary" target="_blank">extension</a></td>
<td style="text-align: left;">The end part of a file name that tells you what type of file it is (e.g., .R or .Rmd).</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/g#global-environment" class="glossary" target="_blank">global-environment</a></td>
<td style="text-align: left;">The interactive workspace where your script runs</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/i#integer" class="glossary" target="_blank">integer</a></td>
<td style="text-align: left;">A data type representing whole numbers.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/l#logical" class="glossary" target="_blank">logical</a></td>
<td style="text-align: left;">A data type representing TRUE or FALSE values.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/n#na" class="glossary" target="_blank">na</a></td>
<td style="text-align: left;">A missing value that is “Not Available”</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/n#nominal" class="glossary" target="_blank">nominal</a></td>
<td style="text-align: left;">Categorical variables that don't have an inherent order, such as types of animal.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/n#numeric" class="glossary" target="_blank">numeric</a></td>
<td style="text-align: left;">A data type representing a real decimal number or integer.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/p#panes" class="glossary" target="_blank">panes</a></td>
<td style="text-align: left;">RStudio is arranged with four window “panes”.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/t#tabular-data" class="glossary" target="_blank">tabular-data</a></td>
<td style="text-align: left;">Data in a rectangular table format, where each row has an entry for each column.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/t#tidyverse" class="glossary" target="_blank">tidyverse</a></td>
<td style="text-align: left;">A set of R packages that help you create and work with tidy data</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/u#url" class="glossary" target="_blank">url</a></td>
<td style="text-align: left;">The address of a web page (uniform resource locator)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://psyteachr.github.io/glossary/v#vector" class="glossary" target="_blank">vector</a></td>
<td style="text-align: left;">A type of data structure that collects values with the same data type, like T/F values, numbers, or strings.</td>
</tr>
</tbody>
</table>
</div>
</section><section id="sec-resources-data" class="level2" data-number="G.11"><h2 data-number="G.11" class="anchored" data-anchor-id="sec-resources-data">
<span class="header-section-number">G.11</span> Further resources</h2>
<ul>
<li><a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-import.pdf">Data import cheatsheet</a></li>
<li>
<a href="http://r4ds.had.co.nz/data-import.html">Chapter 11: Data Import</a> in <em>R for Data Science</em>
</li>
<li><a href="https://psyteachr.github.io/tutorials/multi-row-headers.html">Multi-row headers</a></li>
</ul>


</section></main><!-- /main --><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script><script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;

    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    $(solveme[i]).after(" <span class='webex-icon'></span>");
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    $(selects[i]).after(" <span class='webex-icon'></span>");
  }

  update_total_correct();
}

</script><script>
$( document ).ready(function() {
  var cite = ' ';
  var psyteachr = ' <a href="https://psyteachr.github.io/"><img src="images/logos/psyteachr_logo.png" style="height: 31px; color: white;" alt="psyTeachR: Reproducible Research" /></a>';
  var license = ' <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" target="blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"></a>';

  $("footer div.row div:eq(1) p").html(
    psyteachr + license + cite
  );

  function move_sidebar() {
    var w = window.innerWidth;
    if (w < 992) {
      $("#toc").appendTo($("#main-nav"));
    } else {
      $("#toc").appendTo($("div.sidebar-chapter"));
    }
  }
  move_sidebar();
  window.onresize = move_sidebar;
});
</script><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./app-debugging.html" class="pagination-link" aria-label="Debugging">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">F</span>&nbsp; <span class="chapter-title">Debugging</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./app-datatypes.html" class="pagination-link" aria-label="Data Types">
        <span class="nav-page-text"><span class="chapter-number">H</span>&nbsp; <span class="chapter-title">Data Types</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>CC-BY 2024, psyTeachR</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/psyteachr/ads-v3/edit/master/app-import.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/psyteachr/ads-v3/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li><li><a href="https://github.com/psyteachr/ads-v3/blob/master/app-import.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/psyteachr/ads-v3">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/psyteachr">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://doi.org/10.5281/zenodo.6365077">
      <i class="bi bi-https://zenodo.org/badge/DOI/10.5281/zenodo.6365077.svg" role="img">
</i> 
    </a>
  </li>  
</ul>
</div>
  </div>
</footer>


</body></html>